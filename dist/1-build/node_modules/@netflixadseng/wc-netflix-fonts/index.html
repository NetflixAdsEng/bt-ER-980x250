<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<script type="text/javascript">
			/* prettier-ignore */
			window.Utils=window.Utils||{},Utils.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Utils.isiOS=/iPad|iPhone|iPod/.test(navigator.userAgent),Utils.isiOS9up=Utils.isiOS&&9<navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],Utils.isiPad=/iPad/.test(navigator.userAgent),Utils.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),window.Utils=window.Utils||{},Utils.SvgIcon=function(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"d",e),i.setAttribute("data-original",e),null!=n&&i.setAttribute("fill",n),i.setAttribute("class",t||""),i},"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var i=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var e,n=arguments.length;for(e=0;e<n;e++)t=arguments[e],i.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return-1!==l(this,t+="")},c.add=function(){for(var t,e=arguments,n=0,i=e.length,r=!1;t=e[n]+"",-1===l(this,t)&&(this.push(t),r=!0),++n<i;);r&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,i=0,r=n.length,o=!1;do{for(t=n[i]+"",e=l(this,t);-1!==e;)this.splice(e,1),o=!0,e=l(this,t)}while(++i<r);o&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var f={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(t){-2146823252===t.number&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,d)}}(self)),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function r(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void s(i.promise,t)}a(i.promise,e)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var i,r}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)r(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var e=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return r(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(i,r){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},r)}a[e]=t,0==--s&&i(a)}catch(t){r(t)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return i([]);for(var s=a.length,t=0;a.length>t;t++)o(t,a[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(r){return new o(function(t,e){for(var n=0,i=r.length;n<i;n++)r[n].then(t,e)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw Error("unable to locate global object")}();t.Promise||(t.Promise=o)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},writable:!0,configurable:!0}),window.Utils=window.Utils||{},Utils.createStyle=function(t,e){var n=t+"-component-stylesheet",i=document.getElementById(n)||this.stylesheet;i||((i=document.createElement("style")).type="text/css",i.id=n,this.appendChild(i));for(var r=i.innerHTML,o=0;o<arguments.length-1;o+=2){var a=arguments[o+1],s=" ";Array.isArray(a)&&(!0===a[1]&&(s=""),a=a[0]),r+=t+s,r+=a.replace(/\,\s+/g,","),r+=" { "+(arguments[o+2]||"")+" }\n"}i.innerHTML=r,this.stylesheet=i},window.Utils=window.Utils||{},Utils.textFit=function(){"use strict";var a={alignVert:!1,alignHoriz:!1,multiLine:!1,detectMultiLine:!0,minFontSize:6,maxFontSize:80,reProcess:!0,widthOnly:!1,alignVertWithFlexbox:!1};return function(t,e){e||(e={});var n={};for(var i in a)e.hasOwnProperty(i)?n[i]=e[i]:n[i]=a[i];"function"==typeof t.toArray&&(t=t.toArray());var r=Object.prototype.toString.call(t);"[object Array]"!==r&&"[object NodeList]"!==r&&"[object HTMLCollection]"!==r&&(t=[t]);for(var o=0;o<t.length;o++)s(t[o],n)};function s(t,e){if(n=t,!("object"==typeof HTMLElement?n instanceof HTMLElement:n&&"object"==typeof n&&null!==n&&1===n.nodeType&&"string"==typeof n.nodeName)||!e.reProcess&&t.getAttribute("textFitted"))return!1;var n,i,r,o,a,s,l,u,c,d,f,h;if(e.reProcess||t.setAttribute("textFitted",1),o=t.innerHTML,c=t,d=window.getComputedStyle(c,null),a=c.clientWidth-parseInt(d.getPropertyValue("padding-left"),10)-parseInt(d.getPropertyValue("padding-right"),10),f=t,h=window.getComputedStyle(f,null),r=f.clientHeight-parseInt(h.getPropertyValue("padding-top"),10)-parseInt(h.getPropertyValue("padding-bottom"),10),!a||!e.widthOnly&&!r)throw e.widthOnly?new Error("Set a static width on the target element "+t.outerHTML+" before using textFit!"):new Error("Set a static height and width on the target element "+t.outerHTML+" before using textFit!");-1===o.indexOf("textFitted")?((i=document.createElement("span")).className="textFitted",i.style.display="inline-block",i.innerHTML=o,t.innerHTML="",t.appendChild(i)):v(i=t.querySelector("span.textFitted"),"textFitAlignVert")&&(i.className=i.className.replace("textFitAlignVert",""),i.style.height="",t.className.replace("textFitAlignVertFlex","")),e.alignHoriz&&(t.style["text-align"]="center",i.style["text-align"]="center");var p=e.multiLine;for(e.detectMultiLine&&!p&&i.scrollHeight>=2*parseInt(window.getComputedStyle(i)["font-size"],10)&&(p=!0),p||(t.style["white-space"]="nowrap"),s=e.minFontSize+1,u=e.maxFontSize+1;s<=u;)l=parseInt((s+u)/2,10),i.style.fontSize=l+"px",i.scrollWidth<=a&&(e.widthOnly||i.scrollHeight<=r)?s=l+1:u=l-1;if(i.style.fontSize=l-1+"px",e.alignVert){!function(){if(document.getElementById("textFitStyleSheet"))return;var t=[".textFitAlignVert{","position: absolute;","top: 0; right: 0; bottom: 0; left: 0;","margin: auto;","display: flex;","justify-content: center;","flex-direction: column;","}",".textFitAlignHoriz{","position: absolute;","top: 0; right: 0;","margin: auto;","}",".textFitAlignVertFlex{","display: flex;","}",".textFitAlignVertFlex .textFitAlignVert{","position: static;","}"].join(""),e=document.createElement("style");e.type="text/css",e.id="textFitStyleSheet",e.innerHTML=t,document.body.appendChild(e)}(),v(i,"textFitAlignHoriz")||(i.className=i.className+" textFitAlignHoriz");var m=i.scrollHeight;"static"===window.getComputedStyle(t).position&&(t.style.position="relative"),v(i,"textFitAlignVert")||(i.className=i.className+" textFitAlignVert"),i.style.height=m+"px",e.alignVertWithFlexbox&&!v(t,"textFitAlignVertFlex")&&(t.className=t.className+" textFitAlignVertFlex")}}function v(t,e){return-1<(" "+t.className+" ").indexOf(" "+e+" ")}}(),function(){function a(t){window.Enabler&&Enabler.isServingInLiveEnvironment()&&"error"!==t||console[t].apply(console,Array.prototype.slice.call(arguments,1))}!function(){function t(){this.mutationObserver=null}t.prototype.startObserving=function(i,e){if(!window.MutationObserver||window.MutationObserver._isPolyfilled){var n="monetElementObserver__"+Math.floor(1e4*Math.random());window[n]=function(){var t=Array.prototype.slice.call(document.querySelectorAll(i));0<t.length&&e(t),window[n]=null};var t="data:text/javascript;base64,"+btoa("window."+n+"();"),r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t),setTimeout(function(){document.head.appendChild(r)},0)}else{this.mutationObserver=new MutationObserver(function(t){var n=[];t.forEach(function(t){"childList"===t.type&&Array.prototype.slice.call(t.addedNodes).forEach(function(t){if(t.nodeType===Node.ELEMENT_NODE){(function(t,e){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return!!n&&n.call(t,e)})(t,i)&&n.push(t);var e=t.querySelectorAll(i);Array.prototype.push.apply(n,e)}})}),0<n.length&&e(n)}),this.mutationObserver.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}},t.prototype.stopObserving=function(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}}();var s=function(){var t="https://ae.nflximg.net/monet/scripts/monet.min.js",e="https://s0.2mdn.net/ads/studio/Enabler.js",n=!1,i={};function r(t){var o,e=document.createElement("script"),n=(o=e,new Promise(function(t,e){var n=null,i=null,r=function(){o.removeEventListener("load",n),o.removeEventListener("error",i)};n=function(){r(),t(null)},i=function(t){r(),e(t.error)},o.addEventListener("load",n),o.addEventListener("error",i)}));return e.setAttribute("type","text/javascript"),e.setAttribute("src",t),document.head.appendChild(e),n}function o(t){var e=i[t];return e||(e=i[t]=r(t)),e}function a(){return window.Monet?Promise.resolve():o(t)}function s(){return Enabler.isInitialized()?Promise.resolve():new Promise(function(t,e){Enabler.addEventListener(studio.events.StudioEvent.INIT,function(){t()})})}function l(){return(window.Enabler?Promise.resolve():o(e)).then(a).then(s).then(function(){return n||(n=!0,Monet.initialize(Enabler)),Monet})}function u(){}return u.prototype.getInitialized=function(){return l()},u}(),l=function(){function o(e,n){var t,i,r,o,a=function(t){return n.rootAssets[t]&&n.rootAssets[t].url};return n.rootAssets["url.Exit_URL"]={type:"url",id:"Exit_URL",url:(t=a("url.Exit_URL_Desktop"),i=a("url.Exit_URL_iOS"),r=a("url.Exit_URL_Android"),o=null,Utils.isMobile&&(o=Utils.isiOS?i:r),o||t)},e.dataTransformers.forEach(function(t){t.call(e,n,e)}),n}function n(n,i){var r;return n.backupAssetsPromise||(n.backupAssetsPromise=(r=n.backupLocation,new Promise(function(e,n){var i=new XMLHttpRequest;i.addEventListener("load",function(){if(200<=i.status&&i.status<300)e(i.response);else{var t="Failed to load "+r+" ["+i.status+"]"+i.responseText;n(new Error(t))}}),i.addEventListener("error",function(t){var e="Error in loading "+r;n(t.error||new Error(e))}),i.open("GET",r),i.send()})).then(function(t){a("info","backup.json loaded:",t),i.logEvent("BACKUP_ASSETS_LOADED"),(t=JSON.parse(t)).isBackupData=!0;var e=o(n,t);return Promise.resolve(e)}).catch(function(t){return Promise.reject(t)})),n.backupAssetsPromise}function t(t,e){this.backupLocation=e||"backup.json",this.monetLoader=t,this.dataLoadPromise=null,this.dataLoadFinished=!1,this.loadedData=null,this.primaryAssetsPromise=null,this.backupAssetsPromise=null,this.dataTransformers=[]}return t.prototype.loadData=function(){var t=this.monetLoader,e=this;return this.dataLoadPromise||(this.dataLoadPromise=t.getInitialized().then(function(t){return function(i,r){if(!i.primaryAssetsPromise){var t=r.buildMonetRequest();i.primaryAssetsPromise=new Promise(function(n,e){r.load(t,function(t){a("info","Monet assets loaded:",t),r.logEvent("MONET_ASSETS_LOADED");var e=o(i,t);n(e)},function(t){e(t)})})}return i.primaryAssetsPromise}(e,t)}).then(null,function(){return a("warn",'Primary assets failed to load from Monet, trying backup at "'+e.backupLocation+'"'),t.getInitialized().then(function(t){return n(e,t)})}).then(function(t){return e.dataLoadFinished=!0,e.loadedData=t},function(t){return a("error","Backup assets failed to load!"),a("error",'"backup.json" can be obtained from C2.0 Manifest Manager.'),e.dataLoadFinished=!0,Promise.reject(t)})),this.dataLoadPromise},t.prototype.isDataLoaded=function(){return this.dataLoadFinished},t.prototype.getDataWhenLoaded=function(){return this.dataLoadPromise.then(function(t){return t})},t.prototype.getBackupData=function(){var e=this;return this.monetLoader.getInitialized().then(function(t){return n(e,t).then(function(t){return t})})},t.prototype.addDataTransformer=function(t){this.dataTransformers.push(t)},t}();!function(){var i=[],r=[];function e(t,e){if(!t.hasAttribute("ready")){if(e){var n=i.indexOf(e);-1<n&&(r=r.concat(i.splice(n,1)))}i.length||(r.length||a("warn","No Monet components registered!"),a("info","Monet environment is ready."),t.setAttribute("ready",""),o(t,"ready"))}}function o(t,e){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}var t=Object.create(HTMLElement.prototype,{pendingLogs:{value:[],enumerable:!1},createdCallback:{value:function(){this.monetLoader=null,this.monetDataProvider=null},enumerable:!0},attachedCallback:{value:function(){if(!this._attached){this._attached=!0;var n=this;this.monetLoader=new s,this.monetLoader.getInitialized().then(function(t){if(0!==n.pendingLogs.length){var e=n.pendingLogs.slice();n.pendingLogs.length=0,t.logEvents(e)}}),this.monetDataProvider=new l(this.monetLoader,this.getAttribute("backup-json-path")),this.monetDataProvider.loadData().then(function(){a("info","Listening for Monet components..."),setTimeout(function(){e(n)},3e3)}).catch(function(t){o(n,"error")})}},enumerable:!0},attributeChangedCallback:{value:function(t){},enumerable:!0},isDataLoaded:{value:function(){return!!this.monetDataProvider&&this.monetDataProvider.isDataLoaded()}},getMonetData:{value:function(){return this.monetDataProvider.getDataWhenLoaded()}},getBackupMonetData:{value:function(){return this.monetDataProvider.getBackupData()}},addDataTransformer:{value:function(t){return this.monetDataProvider.addDataTransformer(t)}},getExitElementId:{value:function(){return this.getAttribute("exit-element-id")}},logEvent:{value:function(e,n){this.monetLoader?this.monetLoader.getInitialized().then(function(t){t.logEvent(e,n)},function(t){a("error","Failed to log Monet event",t,e,n)}):this.pendingLogs.push({eventType:e,eventData:n})}},register:{value:function(t){t.addEventListener("ready",function(t){a("info","Monet component <"+t.target.tagName.toLowerCase()+' id="'+t.target.id+'" /> is ready.'),e(this,t.target)}.bind(this)),i.push(t)}},preview:{value:function(){return!1}}});document.registerElement("monet-integrator",{prototype:t})}()}(),function(){"use strict";var i,r,e,o,n;function t(){i.getMonetData().then(function(t){e=t.rootAssets["url.Exit_URL"].url}).catch(function(t){console.error("Error loading data",t)})}function a(t){l("banner_button")}function s(){l("cta_button")}function l(t){u("CLICK",{src:t}),function(){for(var t=0;t<n.length;t++){var e=n[t];e&&e.pause()}}(),e?(Enabler.exitOverride("exit_banner",e),u("AD_EXIT",{url:e})):(Enabler.exit("clickTag"),u("AD_EXIT",{url:"Exit via ad platform"}))}function u(t,e){i&&i.logEvent(t,e)}window.addEventListener("MonetAdReady",function(){i=document.querySelector("monet-integrator"),n=document.getElementsByTagName("netflix-video"),r=document.getElementsByTagName("netflix-cta"),document.querySelector(".gwd-page-content"),i&&(!function(){var t=i.getExitElementId()||"gwd-taparea_1";(o=document.getElementById(t))?o.addEventListener("click",a,!0):console.error('No exit element was found with id: "'+t+'". This can be defined on MonetIntegrator "exit-element-id". It should correspond with an element that dispatches a "click" event.');if(r)for(var e=0;e<r.length;e++){var n=r[e].querySelector(".button");n.addEventListener("click",s,!0)}}(),i.hasAttribute("ready")?t():i.addEventListener("ready",t))});var c=new CustomEvent("MonetAdReady");/comp|inter|loaded/.test(document.readyState)?window.dispatchEvent(c):document.addEventListener("DOMContentLoaded",function(){window.dispatchEvent(c)})}(),"undefined"==typeof module&&(module={}),module.exports={id:"67e5c648-28f4-41c4-b2e4-c12fbbc10825",name:"wc-monet-integrator",description:"Component to tie ad units to monet data integration",type:"web_components",context:"Default",state:"published",updated:1546889615494,full_name:"NetflixAdsEng/wc-monet-integrator",html_url:"https://github.com/NetflixAdsEng/wc-monet-integrator",username:"GitHub",version:"5.1.0",minimum:"3.0.0"};
		</script>
		<!-- prettier-ignore -->
		

		<!-- prettier-ignore -->
		

		<script type="text/javascript">
			/* prettier-ignore */
			
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.FontFaceObserver=t()}(this,function(){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o={maxWidth:"none",display:"inline-block",position:"absolute",height:"100%",width:"100%",overflow:"scroll",fontSize:"16px"},l={display:"inline-block",height:"200%",width:"200%",fontSize:"16px",maxWidth:"none"},a={maxWidth:"none",minWidth:"20px",minHeight:"20px",display:"inline-block",overflow:"hidden",position:"absolute",width:"auto",margin:"0",padding:"0",top:"-999px",whiteSpace:"nowrap",fontSynthesis:"none"},b=function(){function t(e){n(this,t),this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.lastOffsetWidth=-1,Object.assign(this.collapsible.style,o),Object.assign(this.expandable.style,o),Object.assign(this.expandableInner.style,o),Object.assign(this.collapsibleInner.style,l),this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return e(t,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(e){Object.assign(this.element.style,i({},a,{font:e}))}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:function(e){this.element.style.width=e+"px"}},{key:"reset",value:function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)}},{key:"onScroll",value:function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)}},{key:"onResize",value:function(e){var t=this;function n(){t.onScroll(e)}this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()}}]),t}();var t=function(){function S(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,S),this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this}return e(S,null,[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(null===S.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(S.getUserAgent());S.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return S.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(null===S.HAS_SAFARI_10_BUG)if(S.supportsNativeFontLoading()&&/Apple/.test(S.getNavigatorVendor())){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(S.getUserAgent());S.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else S.HAS_SAFARI_10_BUG=!1;return S.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return null===S.SUPPORTS_NATIVE_FONT_LOADING&&(S.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),S.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportStretch",value:function(){if(null===S.SUPPORTS_STRETCH){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}S.SUPPORTS_STRETCH=""!==e.style.font}return S.SUPPORTS_STRETCH}}]),e(S,[{key:"load",value:function(e,t){var p=this,m=e||"BESbswy",g=0,v=t||S.DEFAULT_TIMEOUT,y=p.getTime();return new Promise(function(h,f){if(S.supportsNativeFontLoading()&&!S.hasSafari10Bug()){var e=new Promise(function(n,i){!function t(){var e=p.getTime();v<=e-y?i():document.fonts.load(p.getStyle('"'+p.family+'"'),m).then(function(e){1<=e.length?n():setTimeout(t,25)},function(){i()})}()}),t=new Promise(function(e,t){g=setTimeout(t,v)});Promise.race([t,e]).then(function(){clearTimeout(g),h(p)},function(){f(p)})}else n=function(){var i=new b(m),o=new b(m),l=new b(m),a=-1,s=-1,r=-1,e=-1,t=-1,n=-1,u=document.createElement("div");function c(){null!==u.parentNode&&u.parentNode.removeChild(u)}function d(){if((-1!=a&&-1!=s||-1!=a&&-1!=r||-1!=s&&-1!=r)&&(a==s||a==r||s==r)){if(S.hasWebKitFallbackBug()&&(a==e&&s==e&&r==e||a==t&&s==t&&r==t||a==n&&s==n&&r==n))return;c(),clearTimeout(g),h(p)}}u.dir="ltr",i.setFont(p.getStyle("sans-serif")),o.setFont(p.getStyle("serif")),l.setFont(p.getStyle("monospace")),u.appendChild(i.getElement()),u.appendChild(o.getElement()),u.appendChild(l.getElement()),document.body.appendChild(u),e=i.getWidth(),t=o.getWidth(),n=l.getWidth(),function e(){var t=p.getTime();if(v<=t-y)c(),f(p);else{var n=document.hidden;!0!==n&&void 0!==n||(a=i.getWidth(),s=o.getWidth(),r=l.getWidth(),d()),g=setTimeout(e,50)}}(),i.onResize(function(e){a=e,d()}),i.setFont(p.getStyle('"'+p.family+'",sans-serif')),o.onResize(function(e){s=e,d()}),o.setFont(p.getStyle('"'+p.family+'",serif')),l.onResize(function(e){r=e,d()}),l.setFont(p.getStyle('"'+p.family+'",monospace'))},document.body?n():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),n()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),n())});var n})}},{key:"getStyle",value:function(e){return[this.style,this.weight,S.supportStretch()?this.stretch:"","100px",e].join(" ")}},{key:"getTime",value:function(){return(new Date).getTime()}}]),S}();return t.Ruler=b,t.HAS_WEBKIT_FALLBACK_BUG=null,t.HAS_SAFARI_10_BUG=null,t.SUPPORTS_STRETCH=null,t.SUPPORTS_NATIVE_FONT_LOADING=null,t.DEFAULT_TIMEOUT=3e3,t});
!(function() {
  var COMPONENT_NAME = 'netflix-fonts';

  /**
   * Font selection takes the following inputs:
   *  - locale, string matching keys in the `fonts` dictionary below. Locales defined by Monet-Integrator will append.
   *  - light, boolean indicating font weight is required
   *  - normal, boolean indicating font weight
   *  - bold, boolean indicated font weight
   *
   * Font declarations are injected as <link> tags which load stylesheets
   * containing the @font-face.
   *
   * https://github.com/bramstein/fontfaceobserver then monitors for success / fail of those requests.
   *
   * If all weights for a particular family fail, then fallback fonts of corresponding
   * weights will be attempted. Browsers are not strict about weight, so if any one weight of a family
   * succeeds, then all weights are considered successful. See Bramstein's response here: https://github.com/bramstein/fontfaceobserver/issues/38
   *
   * If all fallbacks fail, component will throw.
   *
   * If fonts succeed to load, component will dispatch 'ready'.
   *
   */
  var FONT_CDN = 'https://ae.nflximg.net/monet/fonts';
  var fonts = {
    // english
    en: [
      {
        fam: 'Netflix Sans',
        weights: {
          '300': 'en__ns__300.css',
          '500': 'en__ns__500.css',
          '700': 'en__ns__700.css'
        },
        test: 'BESbwy'
      }
    ],

    // hebrew
    he: [
      {
        fam: 'Noto Sans Hebrew',
        weights: {
          '400': 'hebrew/he__nsh__400.css',
          '700': 'hebrew/he__nsh__700.css'
        },
        test: 'צפו עכשיו'
      },
      {
        fam: 'Assistant',
        weights: {
          '400': 'hebrew/he__a__400.css',
          '600': 'hebrew/he__a__600.css',
          '700': 'hebrew/he__a__700.css'
        },
        test: 'אצפו עכשיו'
      },
      {
        fam: 'Rubik',
        weights: {
          '400': 'hebrew/he__r__400.css',
          '700': 'hebrew/he__r__700.css'
        },
        test: 'צפו עכשיו'
      }
    ],

    // thai
    th: [
      {
        fam: 'Neue Helvetica Thai',
        weights: {
          '400': 'thai/th__nht__400.css',
          '700': 'thai/th__nht__700.css'
        },
        test: 'รับชมได้แล้ว'
      },
      {
        fam: 'Prompt',
        weights: {
          '400': 'thai/th__p__400.css',
          '600': 'thai/th__p__600.css',
          '700': 'thai/th__p__700.css'
        },
        test: 'รับชมได้แล้ว'
      }
    ],

    // arabic
    ar: [
      {
        fam: 'Neue Helvetica Arab',
        weights: {
          '400': 'arabic/ar__nha__400.css',
          '700': 'arabic/ar__nha__700.css'
        },
        test: 'شاهد الآن'
      },
      {
        fam: 'Changa',
        weights: {
          '400': 'arabic/ar__c__400.css',
          '600': 'arabic/ar__c__600.css',
          '700': 'arabic/ar__c__700.css'
        },
        test: 'شاهد الآن'
      },
      {
        fam: 'Droid Arabic Kufi',
        weights: {
          '400': 'arabic/ar__dak__400.css',
          '700': 'arabic/ar__dak__700.css'
        },
        test: 'شاهد الآن'
      }
    ]
  };

  /**
   * Weight management
   *
   */

  var weightsMap = {
    light: [300, 400],
    normal: [500, 600],
    bold: [700]
  };
  // enable weight requests by string ('light', 'bold', etc), or by numerical weight (300, 400, etc)
  function getWeights(value) {
    if (isNaN(value)) {
      return weightsMap[value] || [];
    } else {
      return [value];
    }
  }
  function getFontReqsByWeights(font, weightReqs) {
    return weightReqs.map(function(weightReq) {
      var weights = getWeights(weightReq); // standardize weights
      return weights.reduce(function(acc, weight) {
        // verify requested weight has a definition in "fonts"
        if (weight in font.weights) {
          acc.push({
            url: FONT_CDN + '/' + font.weights[weight],
            weight: weight
          });
        }
        return acc;
      }, []);
    });
  }

  /**
   * Font loading
   *
   *
   */
  function loadFonts(component, locales, weights) {
    console.log('loadFonts:', locales, weights);
    var promises = [];
    locales.forEach(function(locale) {
      if (locale in fonts) {
        promises.push(loadLocale(locale, weights));
      }
    });
    Promise.all(promises)
      .then(function() {
        console.log('All fonts are loaded.');
        component.dispatchEvent(new CustomEvent('ready'));
      })
      .catch(function(err) {
        console.log('Failed to load fonts.', err);
        component.dispatchEvent(new CustomEvent('fail'));
      });
  }
  function loadLocale(locale, weights, index) {
    return new Promise(function(resolve, reject) {
      var localeIndex = index || 0;
      if (localeIndex >= fonts[locale].length) {
        reject(new Error('No more fallback fonts available.'));
      }
      var promises = [];
      var font = fonts[locale][localeIndex];
      var reqs = getFontReqsByWeights(font, weights);
      reqs.forEach(function(req) {
        req.forEach(function(weight) {
          injectFontCss(weight.url);
          promises.push(observeFontLoad(font, locale, weight, localeIndex));
        });
      });
      Promise.all(promises)
        .then(function() {
          resolve();
        })
        .catch(function(err) {
          reject(err);
        });
    });
  }
  function observeFontLoad(font, locale, weight, index) {
    return new Promise(function(resolve, reject) {
      var observer = new FontFaceObserver(font.fam, { weight: weight.weight });
      observer
        .load(font.test)
        .then(function(f) {
          console.log('Loaded font: "' + f.family + '", weight: ' + f.weight);
          resolve();
        })
        .catch(function(err) {
          console.log('Failed to load font: "' + font.fam + '", weight: ' + weight.weight);
          // recurse to next locale for failed weight load
          loadLocale(locale, [weight.weight], index + 1)
            .then(function() {
              resolve();
            })
            .catch(function(err) {
              reject(err);
            });
        });
    });
  }
  function injectFontCss(url) {
    console.log('injectFontCss()', url);
    var head = document.getElementsByTagName('head')[0];
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = url;
    link.media = 'all';
    head.appendChild(link);
  }

  /**
   * Utilities
   *
   */
  function pushUnique(arr, val) {
    if (val && arr.indexOf(val) === -1) {
      arr.push(val);
    }
    return arr;
  }

  /**
   * Element declaration
   *
   */
  if (document.registerElement) {
    var component = Object.create(HTMLElement.prototype, {
      createdCallback: {
        value: function() {
          console.log('created');
          this._attached = false;
          this._hasInited = false;
        }
      },
      detachedCallback: {
        value: function() {
          this._attached = false;
        }
      },
      attachedCallback: {
        value: function() {
          var dom = this;

          this._attached = true;
          if (this._hasInited) {
            return;
          }
          this._hasInited = true;

          Utils.createStyle.call(
            dom,
            '',
            '.en, .da, .nl, .fi, .fr, .de, .it, .no, .pt, .ro, .es, .sv, .tr, .pl, .el',
            "font-family: 'Netflix Sans', Helvetica, Arial, sans-serif;",
            '.zh',
            "-webkit-locale: 'zh'; font-family: 'Netflix Sans', 'Microsoft JhengHei UI', '微軟正黑體', 'Heiti TC', '黑体-简', Arial, Helvetica, sans-serif;",
            '.ja',
            "-webkit-locale: 'ja'; font-family: 'Netflix Sans', 'Yu Gothic Medium', 'Hiragino Kaku Gothic Pro', 'ヒラギノ角ゴ', Arial, Helvetica, sans-serif;",
            '.ko',
            "-webkit-locale: 'ko'; font-family: 'Netflix Sans', 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', Arial, Helvetica, sans-serif;",
            '.ar',
            "font-family: 'Netflix Sans', 'Neue Helvetica Arab', 'Changa', 'Droid Arabic Kufi', Arial, sans-serif;",
            '.th',
            "font-family: 'Netflix Sans', 'Neue Helvetica Thai', 'Prompt', Arial, sans-serif;",
            '.th .cta_copy',
            'margin-top: -2px;',
            '.he',
            "font-family: 'Netflix Sans', 'Noto Sans Hebrew', 'Assistant', 'Rubik', Arial, sans-serif;"
          );

          // @param: locale
          var locales = this.getAttribute('locale') ? this.getAttribute('locale').split(/\s*,\s*/) : null;

          // @param: weights
          var weights = [];
          // light
          if (this.hasAttribute('light') && this.getAttribute('light').toString() !== 'false') {
            weights.push('light');
          }
          // normal, will load by default, unless explicitly turned off
          if (this.hasAttribute('normal')) {
            if (this.getAttribute('normal').toString() !== 'false') {
              weights.push('normal');
            }
          } else {
            weights.push('normal');
          }
          // bold
          if (this.hasAttribute('bold') && this.getAttribute('bold').toString() !== 'false') {
            weights.push('bold');
          }

          var MonetComponent = document.querySelector('monet-integrator');
          if (MonetComponent) {
            MonetComponent.register(this);
            MonetComponent.getMonetData().then(function(data) {
              var monetLocales = [];
              try {
                for (var i in data.rootAssets) {
                  if (i.split('.')[0] === 'text') {
                    var monetLocale = Monet.getComponentLocale(i).substr(0, 2); // this doesn't catch correctly if data is not present, bc MI doesn't reject the promise
                    monetLocales = pushUnique(monetLocales, monetLocale);
                  }
                }
                loadFonts(dom, locales || monetLocales, weights);
              } catch (e) {
                MonetComponent.getBackupMonetData().then(
                  function(backupData) {
                    for (var i in backupData.rootAssets) {
                      if (i.split('.')[0] === 'text') {
                        monetLocale = Monet.getComponentLocale(i).substr(0, 2); // this doesn't catch correctly if data is not present, bc MI doesn't reject the promise
                        monetLocales = pushUnique(monetLocales, monetLocale);
                      }
                    }
                    loadFonts(dom, locales || monetLocales, weights);
                  },
                  function(error) {
                    Monet.logEvent('MONET_DATA_ERROR', { details: 'Failed to load backup Monet data', stack: error });
                  }
                );
              }
            });
          }
        }
      },
      preview: {
        value: function() {
          return false;
        }
      }
    });
    document.registerElement(COMPONENT_NAME, { prototype: component });
  }
})();
// GENERIC SOURCE TRACKER: wc-netflix-fonts
if (typeof module === 'undefined') {
  module = {};
}
// prettier-ignore
module.exports = {
  "id": "338cb667-aeb7-4b00-bb9f-76025b6c20b6",
  "name": "wc-netflix-fonts",
  "description": "Netflix Font Loader Component",
  "type": "web_components",
  "context": "Default",
  "state": "published",
  "updated": 1544756472401,
  "full_name": "NetflixAdsEng/wc-netflix-fonts",
  "html_url": "https://github.com/NetflixAdsEng/wc-netflix-fonts",
  "username": "GitHub",
  "version": "5.0.1",
  "minimum": "3.0.0"
};

		</script>
	</head>

	<body>
		<script>
			var component = document.createElement('netflix-fonts')
			component.preview()
			document.body.appendChild(component)
		</script>
	</body>
</html>
