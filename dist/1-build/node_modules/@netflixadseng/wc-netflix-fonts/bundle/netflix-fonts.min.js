!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FontFaceObserver=t()}(this,function(){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={maxWidth:"none",display:"inline-block",position:"absolute",height:"100%",width:"100%",overflow:"scroll",fontSize:"16px"},o={display:"inline-block",height:"200%",width:"200%",fontSize:"16px",maxWidth:"none"},l={maxWidth:"none",minWidth:"20px",minHeight:"20px",display:"inline-block",overflow:"hidden",position:"absolute",width:"auto",margin:"0",padding:"0",top:"-999px",whiteSpace:"nowrap",fontSynthesis:"none"},y=function(){function t(e){n(this,t),this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(e)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.lastOffsetWidth=-1,Object.assign(this.collapsible.style,s),Object.assign(this.expandable.style,s),Object.assign(this.expandableInner.style,s),Object.assign(this.collapsibleInner.style,o),this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return e(t,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(e){Object.assign(this.element.style,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}({},l,{font:e}))}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:function(e){this.element.style.width=e+"px"}},{key:"reset",value:function(){var e=this.getWidth(),t=e+100;return this.expandableInner.style.width=t+"px",this.expandable.scrollLeft=t,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==e&&(this.lastOffsetWidth=e,!0)}},{key:"onScroll",value:function(e){this.reset()&&null!==this.element.parentNode&&e(this.lastOffsetWidth)}},{key:"onResize",value:function(e){var t=this;function n(){t.onScroll(e)}this.collapsible.addEventListener("scroll",n),this.expandable.addEventListener("scroll",n),this.reset()}}]),t}(),t=function(){function v(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,v),this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this}return e(v,null,[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(null===v.HAS_WEBKIT_FALLBACK_BUG){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(v.getUserAgent());v.HAS_WEBKIT_FALLBACK_BUG=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return v.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(null===v.HAS_SAFARI_10_BUG)if(v.supportsNativeFontLoading()&&/Apple/.test(v.getNavigatorVendor())){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(v.getUserAgent());v.HAS_SAFARI_10_BUG=!!e&&parseInt(e[1],10)<603}else v.HAS_SAFARI_10_BUG=!1;return v.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return null===v.SUPPORTS_NATIVE_FONT_LOADING&&(v.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),v.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportStretch",value:function(){if(null===v.SUPPORTS_STRETCH){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}v.SUPPORTS_STRETCH=""!==e.style.font}return v.SUPPORTS_STRETCH}}]),e(v,[{key:"load",value:function(e,t){var m=this,_=e||"BESbswy",p=0,g=t||v.DEFAULT_TIMEOUT,b=m.getTime();return new Promise(function(f,d){if(v.supportsNativeFontLoading()&&!v.hasSafari10Bug()){var e=new Promise(function(n,i){!function t(){var e=m.getTime();g<=e-b?i(new Error(g+"ms timeout exceeded")):document.fonts.load(m.getStyle('"'+m.family+'"'),_).then(function(e){1<=e.length?n():setTimeout(t,25)},i)}()}),t=new Promise(function(e,t){p=setTimeout(function(){t(new Error(g+"ms timeout exceeded"))},g)});Promise.race([t,e]).then(function(){clearTimeout(p),f(m)},d)}else n=function(){var e,t,n,i=new y(_),a=new y(_),s=new y(_),o=-1,l=-1,r=-1,c=document.createElement("div");function u(){null!==c.parentNode&&c.parentNode.removeChild(c)}function h(){if((-1!=o&&-1!=l||-1!=o&&-1!=r||-1!=l&&-1!=r)&&(o==l||o==r||l==r)){if(v.hasWebKitFallbackBug()&&(o==e&&l==e&&r==e||o==t&&l==t&&r==t||o==n&&l==n&&r==n))return;u(),clearTimeout(p),f(m)}}c.dir="ltr",i.setFont(m.getStyle("sans-serif")),a.setFont(m.getStyle("serif")),s.setFont(m.getStyle("monospace")),c.appendChild(i.getElement()),c.appendChild(a.getElement()),c.appendChild(s.getElement()),document.body.appendChild(c),e=i.getWidth(),t=a.getWidth(),n=s.getWidth(),function e(){var t=m.getTime();if(g<=t-b)u(),d(new Error(g+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(o=i.getWidth(),l=a.getWidth(),r=s.getWidth(),h()),p=setTimeout(e,50)}}(),i.onResize(function(e){o=e,h()}),i.setFont(m.getStyle('"'+m.family+'",sans-serif')),a.onResize(function(e){l=e,h()}),a.setFont(m.getStyle('"'+m.family+'",serif')),s.onResize(function(e){r=e,h()}),s.setFont(m.getStyle('"'+m.family+'",monospace'))},document.body?n():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),n()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),n())});var n})}},{key:"getStyle",value:function(e){return[this.style,this.weight,v.supportStretch()?this.stretch:"","100px",e].join(" ")}},{key:"getTime",value:function(){return(new Date).getTime()}}]),v}();return a(t,"Ruler",y),a(t,"HAS_WEBKIT_FALLBACK_BUG",null),a(t,"HAS_SAFARI_10_BUG",null),a(t,"SUPPORTS_STRETCH",null),a(t,"SUPPORTS_NATIVE_FONT_LOADING",null),a(t,"DEFAULT_TIMEOUT",3e3),t}),function(){var s="https://ae.nflximg.net/monet/fonts",a={en:[{fam:"Netflix Sans",weights:{300:"en__ns__300.css",500:"en__ns__500.css",700:"en__ns__700.css"},test:"BESbwy"}],he:[{fam:"Noto Sans Hebrew",weights:{400:"hebrew/he__nsh__400.css",700:"hebrew/he__nsh__700.css"},test:"צפו עכשיו"},{fam:"Assistant",weights:{400:"hebrew/he__a__400.css",600:"hebrew/he__a__600.css",700:"hebrew/he__a__700.css"},test:"אצפו עכשיו"},{fam:"Rubik",weights:{400:"hebrew/he__r__400.css",700:"hebrew/he__r__700.css"},test:"צפו עכשיו"}],th:[{fam:"Graphik Thai",weights:{300:"thai/th__gt__300.css",500:"thai/th__gt__500.css",700:"thai/th__gt__700.css"},test:"รับชมได้แล้ว"},{fam:"Neue Helvetica Thai",weights:{400:"thai/th__nht__400.css",700:"thai/th__nht__700.css"},test:"รับชมได้แล้ว"},{fam:"Prompt",weights:{400:"thai/th__p__400.css",600:"thai/th__p__600.css",700:"thai/th__p__700.css"},test:"รับชมได้แล้ว"}],ar:[{fam:"Neue Helvetica Arab",weights:{400:"arabic/ar__nha__400.css",700:"arabic/ar__nha__700.css"},test:"شاهد الآن"},{fam:"Changa",weights:{400:"arabic/ar__c__400.css",600:"arabic/ar__c__600.css",700:"arabic/ar__c__700.css"},test:"شاهد الآن"},{fam:"Droid Arabic Kufi",weights:{400:"arabic/ar__dak__400.css",700:"arabic/ar__dak__700.css"},test:"شاهد الآن"}]},o={light:[300,400],normal:[500,600],bold:[700]};function h(a,e){return e.map(function(e){var t,n,i;return n=e,e="Neue Helvetica Arab"!==(t=a).fam&&"Noto Sans Hebrew"!==t.fam||"normal"!==n?n:"bold",(i=e,isNaN(i)?o[i]||[]:[i]).reduce(function(e,t){return t in a.weights&&e.push({url:s+"/"+a.weights[t],weight:t}),e},[])})}function r(t,e,n){console.log("loadFonts:",e,n);var i=[];return e.forEach(function(e){e in a&&i.push(f(e,n))}),i.length||i.push(f("en",n)),Promise.all(i).then(function(e){return console.log("All fonts are loaded."),t._generateFontLoadsObj(e),t.dispatchEvent(new CustomEvent("ready")),e}).catch(function(e){console.log("Failed to load fonts.",e),t.dispatchEvent(new CustomEvent("fail"))})}function f(u,e,i){return new Promise(function(t,n){var l=i||0;l>=a[u].length&&n(new Error("No more fallback fonts available."));var r=[],c=a[u][l];h(c,e).forEach(function(e){e.forEach(function(e){var i,a,s,o;!function(e){console.log("injectFontCss()",e);var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,n.media="all",t.appendChild(n)}(e.url),r.push((i=c,a=u,s=e,o=l,new Promise(function(t,n){var e=new FontFaceObserver(i.fam,{weight:s.weight});e.load(i.test).then(function(e){console.log('Loaded font: "'+e.family+'", weight: '+e.weight),t(e)}).catch(function(e){console.log('Failed to load font: "'+i.fam+'", weight: '+s.weight),f(a,[s.weight],o+1).then(function(){t()}).catch(function(e){n(e)})})})))})}),Promise.all(r).then(function(e){t({locale:u,fonts:e})}).catch(function(e){n(e)})})}function c(e,t){return t&&-1===e.indexOf(t)&&e.push(t),e}if(customElements.define){var e=function(){var e=Utils.reflectConstruct(HTMLElement,[],this.constructor);return e._attached=!1,e._hasInited=!1,e};(e.prototype=Object.create(HTMLElement.prototype,{disconnectedCallback:{value:function(){this._attached=!1}},connectedCallback:{value:function(){var a=this;if(this._attached=!0,!this._hasInited){this._hasInited=!0,Utils.createStyle.call(a,"",".en, .da, .nl, .fi, .fr, .de, .it, .no, .pt, .ro, .es, .sv, .tr, .pl, .el","font-family: 'Netflix Sans', Helvetica, Arial, sans-serif;",".zh","-webkit-locale: 'zh'; font-family: 'Netflix Sans', 'Microsoft JhengHei UI', '微軟正黑體', 'Heiti TC', '黑体-简', Arial, Helvetica, sans-serif;",".ja","-webkit-locale: 'ja'; font-family: 'Netflix Sans', 'Yu Gothic Medium', 'Hiragino Kaku Gothic Pro', 'ヒラギノ角ゴ', Arial, Helvetica, sans-serif;",".ko","-webkit-locale: 'ko'; font-family: 'Netflix Sans', 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', '애플 SD 산돌고딕 Neo', Arial, Helvetica, sans-serif;",".ar","font-family: 'Netflix Sans', 'Neue Helvetica Arab', 'Changa', 'Droid Arabic Kufi', Arial, sans-serif;",".th","font-family: 'Graphik Thai', 'Neue Helvetica Thai', 'Prompt', Arial, sans-serif;",".th .cta_copy","margin-top: -2px;",".he","font-family: 'Netflix Sans', 'Noto Sans Hebrew', 'Assistant', 'Rubik', Arial, sans-serif;");var s=this.getAttribute("locale")?this.getAttribute("locale").split(/\s*,\s*/):null,o=[];this.hasAttribute("light")&&"false"!==this.getAttribute("light").toString()&&o.push("light"),this.hasAttribute("normal")?"false"!==this.getAttribute("normal").toString()&&o.push("normal"):o.push("normal"),this.hasAttribute("bold")&&"false"!==this.getAttribute("bold").toString()&&o.push("bold");var l=document.querySelector("monet-integrator");if(l){l.register(this);l.getMonetData().then(function(e){var n=[];try{for(var t in e.rootAssets)if("text"===t.split(".")[0]){var i=Monet.getComponentLocale(t).substr(0,2);n=c(n,i)}r(a,s||n,o)}catch(e){l.getBackupMonetData().then(function(e){for(var t in e.rootAssets)"text"===t.split(".")[0]&&(i=Monet.getComponentLocale(t).substr(0,2),n=c(n,i));r(a,s||n,o)},function(e){Monet.logEvent("MONET_DATA_ERROR",{details:"Failed to load backup Monet data",stack:e})})}})}}}},preview:{value:function(){return!1}},_generateFontLoadsObj:{value:function(e){if(e){var t=e.reduce(function(e,t){return e[t.locale]=t.fonts,e},{});this.fontLoads=t}}}})).constructor=e,Object.setPrototypeOf(e,HTMLElement),customElements.define("netflix-fonts",e)}}(),"undefined"==typeof module&&(module={}),module.exports={id:"338cb667-aeb7-4b00-bb9f-76025b6c20b6",name:"wc-netflix-fonts",description:"Netflix Font Loader Component",type:"web_components",context:"Default",state:"published",updated:1554177347918,full_name:"NetflixAdsEng/wc-netflix-fonts",html_url:"https://github.com/NetflixAdsEng/wc-netflix-fonts",username:"GitHub",version:"6.1.0",minimum:"3.0.0"};