<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<script type="text/javascript">
			/* prettier-ignore */
			window.Utils=window.Utils||{},Utils.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Utils.isiOS=/iPad|iPhone|iPod/.test(navigator.userAgent),Utils.isiOS9up=Utils.isiOS&&9<navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1],Utils.isiPad=/iPad/.test(navigator.userAgent),Utils.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),window.Utils=window.Utils||{},Utils.SvgIcon=function(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttributeNS(null,"d",e),i.setAttribute("data-original",e),null!=n&&i.setAttribute("fill",n),i.setAttribute("class",t||""),i},"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var i=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var e,n=arguments.length;for(e=0;e<n;e++)t=arguments[e],i.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},u=function(t){for(var e=o.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return-1!==l(this,t+="")},c.add=function(){for(var t,e=arguments,n=0,i=e.length,r=!1;t=e[n]+"",-1===l(this,t)&&(this.push(t),r=!0),++n<i;);r&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,i=0,r=n.length,o=!1;do{for(t=n[i]+"",e=l(this,t);-1!==e;)this.splice(e,1),o=!0,e=l(this,t)}while(++i<r);o&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var f={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(t){-2146823252===t.number&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,d)}}(self)),function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,window.CustomEvent=t)}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function i(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function r(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void s(i.promise,t)}a(i.promise,e)}else(1===n._state?a:s)(i.promise,n._value)})):n._deferreds.push(i)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var i,r}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)r(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}var e=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(i);return r(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,e,n)),n},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(i,r){function o(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){o(e,t)},r)}a[e]=t,0==--s&&i(a)}catch(t){r(t)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return i([]);for(var s=a.length,t=0;a.length>t;t++)o(t,a[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(r){return new o(function(t,e){for(var n=0,i=r.length;n<i;n++)r[n].then(t,e)})},o._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},o._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw Error("unable to locate global object")}();t.Promise||(t.Promise=o)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},writable:!0,configurable:!0}),window.Utils=window.Utils||{},Utils.createStyle=function(t,e){var n=t+"-component-stylesheet",i=document.getElementById(n)||this.stylesheet;i||((i=document.createElement("style")).type="text/css",i.id=n,this.appendChild(i));for(var r=i.innerHTML,o=0;o<arguments.length-1;o+=2){var a=arguments[o+1],s=" ";Array.isArray(a)&&(!0===a[1]&&(s=""),a=a[0]),r+=t+s,r+=a.replace(/\,\s+/g,","),r+=" { "+(arguments[o+2]||"")+" }\n"}i.innerHTML=r,this.stylesheet=i},window.Utils=window.Utils||{},Utils.textFit=function(){"use strict";var a={alignVert:!1,alignHoriz:!1,multiLine:!1,detectMultiLine:!0,minFontSize:6,maxFontSize:80,reProcess:!0,widthOnly:!1,alignVertWithFlexbox:!1};return function(t,e){e||(e={});var n={};for(var i in a)e.hasOwnProperty(i)?n[i]=e[i]:n[i]=a[i];"function"==typeof t.toArray&&(t=t.toArray());var r=Object.prototype.toString.call(t);"[object Array]"!==r&&"[object NodeList]"!==r&&"[object HTMLCollection]"!==r&&(t=[t]);for(var o=0;o<t.length;o++)s(t[o],n)};function s(t,e){if(n=t,!("object"==typeof HTMLElement?n instanceof HTMLElement:n&&"object"==typeof n&&null!==n&&1===n.nodeType&&"string"==typeof n.nodeName)||!e.reProcess&&t.getAttribute("textFitted"))return!1;var n,i,r,o,a,s,l,u,c,d,f,h;if(e.reProcess||t.setAttribute("textFitted",1),o=t.innerHTML,c=t,d=window.getComputedStyle(c,null),a=c.clientWidth-parseInt(d.getPropertyValue("padding-left"),10)-parseInt(d.getPropertyValue("padding-right"),10),f=t,h=window.getComputedStyle(f,null),r=f.clientHeight-parseInt(h.getPropertyValue("padding-top"),10)-parseInt(h.getPropertyValue("padding-bottom"),10),!a||!e.widthOnly&&!r)throw e.widthOnly?new Error("Set a static width on the target element "+t.outerHTML+" before using textFit!"):new Error("Set a static height and width on the target element "+t.outerHTML+" before using textFit!");-1===o.indexOf("textFitted")?((i=document.createElement("span")).className="textFitted",i.style.display="inline-block",i.innerHTML=o,t.innerHTML="",t.appendChild(i)):v(i=t.querySelector("span.textFitted"),"textFitAlignVert")&&(i.className=i.className.replace("textFitAlignVert",""),i.style.height="",t.className.replace("textFitAlignVertFlex","")),e.alignHoriz&&(t.style["text-align"]="center",i.style["text-align"]="center");var p=e.multiLine;for(e.detectMultiLine&&!p&&i.scrollHeight>=2*parseInt(window.getComputedStyle(i)["font-size"],10)&&(p=!0),p||(t.style["white-space"]="nowrap"),s=e.minFontSize+1,u=e.maxFontSize+1;s<=u;)l=parseInt((s+u)/2,10),i.style.fontSize=l+"px",i.scrollWidth<=a&&(e.widthOnly||i.scrollHeight<=r)?s=l+1:u=l-1;if(i.style.fontSize=l-1+"px",e.alignVert){!function(){if(document.getElementById("textFitStyleSheet"))return;var t=[".textFitAlignVert{","position: absolute;","top: 0; right: 0; bottom: 0; left: 0;","margin: auto;","display: flex;","justify-content: center;","flex-direction: column;","}",".textFitAlignHoriz{","position: absolute;","top: 0; right: 0;","margin: auto;","}",".textFitAlignVertFlex{","display: flex;","}",".textFitAlignVertFlex .textFitAlignVert{","position: static;","}"].join(""),e=document.createElement("style");e.type="text/css",e.id="textFitStyleSheet",e.innerHTML=t,document.body.appendChild(e)}(),v(i,"textFitAlignHoriz")||(i.className=i.className+" textFitAlignHoriz");var m=i.scrollHeight;"static"===window.getComputedStyle(t).position&&(t.style.position="relative"),v(i,"textFitAlignVert")||(i.className=i.className+" textFitAlignVert"),i.style.height=m+"px",e.alignVertWithFlexbox&&!v(t,"textFitAlignVertFlex")&&(t.className=t.className+" textFitAlignVertFlex")}}function v(t,e){return-1<(" "+t.className+" ").indexOf(" "+e+" ")}}(),function(){function a(t){window.Enabler&&Enabler.isServingInLiveEnvironment()&&"error"!==t||console[t].apply(console,Array.prototype.slice.call(arguments,1))}!function(){function t(){this.mutationObserver=null}t.prototype.startObserving=function(i,e){if(!window.MutationObserver||window.MutationObserver._isPolyfilled){var n="monetElementObserver__"+Math.floor(1e4*Math.random());window[n]=function(){var t=Array.prototype.slice.call(document.querySelectorAll(i));0<t.length&&e(t),window[n]=null};var t="data:text/javascript;base64,"+btoa("window."+n+"();"),r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t),setTimeout(function(){document.head.appendChild(r)},0)}else{this.mutationObserver=new MutationObserver(function(t){var n=[];t.forEach(function(t){"childList"===t.type&&Array.prototype.slice.call(t.addedNodes).forEach(function(t){if(t.nodeType===Node.ELEMENT_NODE){(function(t,e){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return!!n&&n.call(t,e)})(t,i)&&n.push(t);var e=t.querySelectorAll(i);Array.prototype.push.apply(n,e)}})}),0<n.length&&e(n)}),this.mutationObserver.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}},t.prototype.stopObserving=function(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}}();var s=function(){var t="https://ae.nflximg.net/monet/scripts/monet.min.js",e="https://s0.2mdn.net/ads/studio/Enabler.js",n=!1,i={};function r(t){var o,e=document.createElement("script"),n=(o=e,new Promise(function(t,e){var n=null,i=null,r=function(){o.removeEventListener("load",n),o.removeEventListener("error",i)};n=function(){r(),t(null)},i=function(t){r(),e(t.error)},o.addEventListener("load",n),o.addEventListener("error",i)}));return e.setAttribute("type","text/javascript"),e.setAttribute("src",t),document.head.appendChild(e),n}function o(t){var e=i[t];return e||(e=i[t]=r(t)),e}function a(){return window.Monet?Promise.resolve():o(t)}function s(){return Enabler.isInitialized()?Promise.resolve():new Promise(function(t,e){Enabler.addEventListener(studio.events.StudioEvent.INIT,function(){t()})})}function l(){return(window.Enabler?Promise.resolve():o(e)).then(a).then(s).then(function(){return n||(n=!0,Monet.initialize(Enabler)),Monet})}function u(){}return u.prototype.getInitialized=function(){return l()},u}(),l=function(){function o(e,n){var t,i,r,o,a=function(t){return n.rootAssets[t]&&n.rootAssets[t].url};return n.rootAssets["url.Exit_URL"]={type:"url",id:"Exit_URL",url:(t=a("url.Exit_URL_Desktop"),i=a("url.Exit_URL_iOS"),r=a("url.Exit_URL_Android"),o=null,Utils.isMobile&&(o=Utils.isiOS?i:r),o||t)},e.dataTransformers.forEach(function(t){t.call(e,n,e)}),n}function n(n,i){var r;return n.backupAssetsPromise||(n.backupAssetsPromise=(r=n.backupLocation,new Promise(function(e,n){var i=new XMLHttpRequest;i.addEventListener("load",function(){if(200<=i.status&&i.status<300)e(i.response);else{var t="Failed to load "+r+" ["+i.status+"]"+i.responseText;n(new Error(t))}}),i.addEventListener("error",function(t){var e="Error in loading "+r;n(t.error||new Error(e))}),i.open("GET",r),i.send()})).then(function(t){a("info","backup.json loaded:",t),i.logEvent("BACKUP_ASSETS_LOADED"),(t=JSON.parse(t)).isBackupData=!0;var e=o(n,t);return Promise.resolve(e)}).catch(function(t){return Promise.reject(t)})),n.backupAssetsPromise}function t(t,e){this.backupLocation=e||"backup.json",this.monetLoader=t,this.dataLoadPromise=null,this.dataLoadFinished=!1,this.loadedData=null,this.primaryAssetsPromise=null,this.backupAssetsPromise=null,this.dataTransformers=[]}return t.prototype.loadData=function(){var t=this.monetLoader,e=this;return this.dataLoadPromise||(this.dataLoadPromise=t.getInitialized().then(function(t){return function(i,r){if(!i.primaryAssetsPromise){var t=r.buildMonetRequest();i.primaryAssetsPromise=new Promise(function(n,e){r.load(t,function(t){a("info","Monet assets loaded:",t),r.logEvent("MONET_ASSETS_LOADED");var e=o(i,t);n(e)},function(t){e(t)})})}return i.primaryAssetsPromise}(e,t)}).then(null,function(){return a("warn",'Primary assets failed to load from Monet, trying backup at "'+e.backupLocation+'"'),t.getInitialized().then(function(t){return n(e,t)})}).then(function(t){return e.dataLoadFinished=!0,e.loadedData=t},function(t){return a("error","Backup assets failed to load!"),a("error",'"backup.json" can be obtained from C2.0 Manifest Manager.'),e.dataLoadFinished=!0,Promise.reject(t)})),this.dataLoadPromise},t.prototype.isDataLoaded=function(){return this.dataLoadFinished},t.prototype.getDataWhenLoaded=function(){return this.dataLoadPromise.then(function(t){return t})},t.prototype.getBackupData=function(){var e=this;return this.monetLoader.getInitialized().then(function(t){return n(e,t).then(function(t){return t})})},t.prototype.addDataTransformer=function(t){this.dataTransformers.push(t)},t}();!function(){var i=[],r=[];function e(t,e){if(!t.hasAttribute("ready")){if(e){var n=i.indexOf(e);-1<n&&(r=r.concat(i.splice(n,1)))}i.length||(r.length||a("warn","No Monet components registered!"),a("info","Monet environment is ready."),t.setAttribute("ready",""),o(t,"ready"))}}function o(t,e){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0});t.dispatchEvent(n)}var t=Object.create(HTMLElement.prototype,{pendingLogs:{value:[],enumerable:!1},createdCallback:{value:function(){this.monetLoader=null,this.monetDataProvider=null},enumerable:!0},attachedCallback:{value:function(){if(!this._attached){this._attached=!0;var n=this;this.monetLoader=new s,this.monetLoader.getInitialized().then(function(t){if(0!==n.pendingLogs.length){var e=n.pendingLogs.slice();n.pendingLogs.length=0,t.logEvents(e)}}),this.monetDataProvider=new l(this.monetLoader,this.getAttribute("backup-json-path")),this.monetDataProvider.loadData().then(function(){a("info","Listening for Monet components..."),setTimeout(function(){e(n)},3e3)}).catch(function(t){o(n,"error")})}},enumerable:!0},attributeChangedCallback:{value:function(t){},enumerable:!0},isDataLoaded:{value:function(){return!!this.monetDataProvider&&this.monetDataProvider.isDataLoaded()}},getMonetData:{value:function(){return this.monetDataProvider.getDataWhenLoaded()}},getBackupMonetData:{value:function(){return this.monetDataProvider.getBackupData()}},addDataTransformer:{value:function(t){return this.monetDataProvider.addDataTransformer(t)}},getExitElementId:{value:function(){return this.getAttribute("exit-element-id")}},logEvent:{value:function(e,n){this.monetLoader?this.monetLoader.getInitialized().then(function(t){t.logEvent(e,n)},function(t){a("error","Failed to log Monet event",t,e,n)}):this.pendingLogs.push({eventType:e,eventData:n})}},register:{value:function(t){t.addEventListener("ready",function(t){a("info","Monet component <"+t.target.tagName.toLowerCase()+' id="'+t.target.id+'" /> is ready.'),e(this,t.target)}.bind(this)),i.push(t)}},preview:{value:function(){return!1}}});document.registerElement("monet-integrator",{prototype:t})}()}(),function(){"use strict";var i,r,e,o,n;function t(){i.getMonetData().then(function(t){e=t.rootAssets["url.Exit_URL"].url}).catch(function(t){console.error("Error loading data",t)})}function a(t){l("banner_button")}function s(){l("cta_button")}function l(t){u("CLICK",{src:t}),function(){for(var t=0;t<n.length;t++){var e=n[t];e&&e.pause()}}(),e?(Enabler.exitOverride("exit_banner",e),u("AD_EXIT",{url:e})):(Enabler.exit("clickTag"),u("AD_EXIT",{url:"Exit via ad platform"}))}function u(t,e){i&&i.logEvent(t,e)}window.addEventListener("MonetAdReady",function(){i=document.querySelector("monet-integrator"),n=document.getElementsByTagName("netflix-video"),r=document.getElementsByTagName("netflix-cta"),document.querySelector(".gwd-page-content"),i&&(!function(){var t=i.getExitElementId()||"gwd-taparea_1";(o=document.getElementById(t))?o.addEventListener("click",a,!0):console.error('No exit element was found with id: "'+t+'". This can be defined on MonetIntegrator "exit-element-id". It should correspond with an element that dispatches a "click" event.');if(r)for(var e=0;e<r.length;e++){var n=r[e].querySelector(".button");n.addEventListener("click",s,!0)}}(),i.hasAttribute("ready")?t():i.addEventListener("ready",t))});var c=new CustomEvent("MonetAdReady");/comp|inter|loaded/.test(document.readyState)?window.dispatchEvent(c):document.addEventListener("DOMContentLoaded",function(){window.dispatchEvent(c)})}(),"undefined"==typeof module&&(module={}),module.exports={id:"67e5c648-28f4-41c4-b2e4-c12fbbc10825",name:"wc-monet-integrator",description:"Component to tie ad units to monet data integration",type:"web_components",context:"Default",state:"published",updated:1546889615494,full_name:"NetflixAdsEng/wc-monet-integrator",html_url:"https://github.com/NetflixAdsEng/wc-monet-integrator",username:"GitHub",version:"5.1.0",minimum:"3.0.0"};
		</script>
		<!-- prettier-ignore -->
		
		<script src="https://s0.2mdn.net/ads/studio/cached_libs/tweenmax_1.20.0_d360d9a082ccc13b1a1a9b153f86b378_min.js"></script>

		<!-- prettier-ignore -->
		

		<script type="text/javascript">
			/* prettier-ignore */
			
!(function() {
  var COMPONENT_NAME = 'netflix-video';

  // checks for existing Utils from shared / imported Utils methods
  window.Utils = (function(Utils) {
    Utils.tracker = function(s, u, d) {
      if (this.suppressLog) {
        this.suppressLog = false;
        return;
      }
      if (typeof Monet !== 'undefined') {
        Monet.logEvent(s, { url: u, pos: d.time });
      }
      if (typeof Enabler !== 'undefined') {
        switch (s) {
          case 'VIDEO_FIRST_QUART':
            Enabler.counter('VIDEO_FIRST_QUART');
            break;
          case 'VIDEO_SECOND_QUART':
            Enabler.counter('VIDEO_SECOND_QUART');
            break;
          case 'VIDEO_THIRD_QUART':
            Enabler.counter('VIDEO_THIRD_QUART');
            break;
          case 'VIDEO_PLAY':
            Enabler.counter('VIDEO_PLAY');
            break;
          case 'VIDEO_COMPLETE':
            Enabler.counter('VIDEO_COMPLETE');
            break;
          case 'VIDEO_PAUSE':
            Enabler.counter('VIDEO_PAUSE');
            break;
          case 'VIDEO_STOP':
            Enabler.counter('VIDEO_STOP');
            break;
          case 'VIDEO_UNMUTE':
            Enabler.counter('VIDEO_UNMUTE');
            break;
          case 'VIDEO_MUTE':
            Enabler.counter('VIDEO_MUTE');
            break;
        }
      }
    };

    Utils.isAutoplayAvailable = function() {
      if (!this.isMobile) return true;
      if (!this.isiOS) {
        return true;
      } else if (this.isSafari) {
        if (this.isiPad)
          var os = Number(
            navigator.userAgent
              .split('iPad')[1]
              .split(' ')[3]
              .replace('_', '.')
          );
        else
          var os = navigator.userAgent
            .split('iPhone OS ')[1]
            .split(' ')[0]
            .split('_')[0];
        if (os >= 10) return true;
        else return false;
      } else {
        return false;
      }
    };

    Utils.timeFormat = function(time) {
      var sn = parseInt(time, 10);
      var h = Math.floor(sn / 3600);
      var m = Math.floor((sn - h * 3600) / 60);
      var s = sn - h * 3600 - m * 60;
      if (m < 10) {
        m = m;
      }
      if (s < 10) {
        s = '0' + s;
      }
      var t = (m || 0) + ':' + (s || '00');
      return t;
    };

    Utils.hide = function(el) {
      el.classList.add('hide');
    };
    Utils.show = function(el) {
      el.classList.remove('hide');
    };

    return Utils;
  })(window.Utils || {});

  var VideoSource = (function(id, config) {
    function VideoSource(id, config) {
      this._id = id;
      this.id = id;
      this.title = config.sources[id]
        .split('/')
        .pop()
        .split('.')[0];
      this.plays = 0;
      this.completed = 0;
      this.layers = [];
      this.source = config.sources[id];
      this.customControls = config.customControls[id] || false;
      this.controls = config.controls[id] === undefined ? true : config.controls[id];
      this.muted = config.muted[id] || false;
      this.hideOnComplete = config.hideOnComplete[id] || false;
    }

    VideoSource.prototype.hasBeenPlayed = function() {
      return Boolean(this.plays);
    };
    return VideoSource;
  })();

  var NetflixVideo = (function(component, config) {
    function NetflixVideo(component, config) {
      this.component = component;
      this.config = config;
      this.sources = [];
      this.wrapper = document.createElement('div');
      this.closeButton = createCloseButton.call(this);
      this.closeButtonSvg = this.closeButton.getElementsByTagName('svg')[0];
      this.container = document.createElement('div');
      this.container.className = 'netflix-video-container';
      this.clickArea = document.createElement('div');

      this.closeButton.classList.add('close');
      this.clickArea.classList.add('videoClick');
      this.wrapper.classList.add('netflix-video');
      this.wrapper.appendChild(this.container);
      this.wrapper.appendChild(this.clickArea);
      this.wrapper.appendChild(this.closeButton);
      this.component.appendChild(this.wrapper);

      for (var i = 0; i < this.config.sources.length; i++) {
        this.sources.push(new VideoSource(i, this.config));
        this.sources[i].muted = this.config.muted[i];
      }

      this.stopTimer = function() {
        this.playing = false;
        this.component.playing = false;
        clearInterval(this.timer);
        setTimeDisplay.call(this);
      };

      style.call(this);
      buildControls.call(this);
      createPlayer.call(this);

      function createPlayer() {
        var id = 0;
        this.id = id;
        this.video_id = this.component.getAttribute('video_id');

        this.PlayerState = {
          ENDED: 'ended',
          PLAYING: 'loadeddata',
          PAUSED: 'pause',
          CUED: 'loadstart',
          BUFFERING: 'play',
          LOADED: 'loadeddata',
          VOLUME: 'volumechange'
        };

        this._video = document.createElement('video');
        this._video.width = this.config.size[id] ? this.config.size[id].width : this.config.size[0].width;
        this._video.height = this.config.size[id] ? this.config.size[id].height : this.config.size[0].height;

        this._video.addEventListener('ended', onStateChanged.bind(this));
        this._video.addEventListener('play', onStateChanged.bind(this));
        this._video.addEventListener('pause', onStateChanged.bind(this));
        this._video.addEventListener('volumechange', onStateChanged.bind(this));
        this._video.addEventListener('loadeddata', onStateChanged.bind(this));

        this.spinner = document.createElement('div');
        this.wrapper.insertBefore(this.spinner, this.wrapper.firstChild);
        this.spinner.classList.add('spinner');
        this.spinner.innerHTML =
          '<svg width="38" height="38" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"> <defs> <linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"> <stop stop-color="#fff" stop-opacity="0" offset="0%"/> <stop stop-color="#fff" stop-opacity=".631" offset="63.146%"/> <stop stop-color="#fff" offset="100%"/> </linearGradient> </defs> <g fill="none" fill-rule="evenodd"> <g transform="translate(1 1)"> <path d="M36 18c0-9.94-8.06-18-18-18" id="Oval-2" stroke="url(#a)" stroke-width="2"> <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"/> </path> <circle fill="#fff" cx="36" cy="18" r="1"> <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"/> </circle> </g> </g></svg>';
        Utils.createStyle.call(
          this.component,
          COMPONENT_NAME,
          '.spinner',
          'position:absolute;top:50%;left:50%;width:38px;height:38px;transform:translate(-50%,-50%)'
        );

        this._video.removeAttribute('controls');
        this.container.appendChild(this._video);
        this.video = {
          cueVideoById: function(src) {
            var htmlElem = document.getElementsByTagName('html')[0];
            var isInception = htmlElem.hasAttribute('monet-inception-pristine-element');
            if (typeof Enabler !== 'undefined' && !isInception) {
              this._video.src = Enabler.getUrl(src);
            } else {
              this._video.src = src;
            }
          }.bind(this),
          getDuration: function() {
            return this._video.duration;
          }.bind(this),
          getCurrentTime: function() {
            return this._video.currentTime;
          }.bind(this),
          isMuted: function() {
            return this._video.muted;
          }.bind(this),
          pauseVideo: function() {
            this._video.pause();
          }.bind(this),
          playVideo: function() {
            // if (!Utils.isMobile)
            this._video.play();
          }.bind(this),
          unMute: function() {
            this._video.muted = false;
          }.bind(this),
          mute: function() {
            this._video.muted = true;
          }.bind(this),
          seekTo: function(t) {
            this._video.currentTime = t;
          }.bind(this)
        };

        this.resize();
        setEvents.call(this);
        this.hide();

        if (Utils.isAutoplayAvailable() && this.config.autoplay === true) {
          if (typeof gwd != 'undefined') {
            this.show();
            this.setSource(0);
            this._video.setAttribute('autoplay', '');
            if (Utils.isMobile) {
              this._video.setAttribute('playsinline', '');
              this._video.setAttribute('muted', '');
            }
          } else {
            this.play(0);
          }
        }

        if (typeof Enabler != 'undefined')
          Enabler.loadModule(
            studio.module.ModuleId.VIDEO,
            function() {
              studio.video.Reporter.attach('Video ' + this.video_id, this._video);
            }.bind(this)
          );
      }

      function style() {
        Utils.createStyle.call(
          this.component,
          COMPONENT_NAME,
          '.hide',
          'border: 0 !important;clip: rect(0 0 0 0) !important;height: 1px !important;margin: -1px !important;overflow: hidden !important;padding: 0 !important;position: absolute !important;width: 1px !important;',
          ['.hide', true],
          'border: 0 !important;clip: rect(0 0 0 0) !important;height: 1px !important;margin: -1px !important;overflow: hidden !important;padding: 0 !important;position: absolute !important;width: 1px !important;',
          '.netflix-video',
          'background-color:#000; position: absolute; top: 0; left: 0;',
          '.netflix-video .netflix-video-container',
          'position:absolute;top:0;left:0;',
          '.netflix-video .videoClick',
          'position:absolute;top:0;left:0;cursor:pointer;width:100%;height:100%;background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);',
          '.netflix-video .close',
          'position:absolute;top:10px;left:10px;z-index:15;cursor:pointer;width:' +
            this.config.closeButtonSize +
            'px;height:' +
            this.config.closeButtonSize +
            'px;overflow:hidden;',
          '.netflix-video .videoPanels',
          'width:100%;height:100%;position:absolute;pointer-events:none;',
          '.netflix-video .iVideoPanels',
          'width:0;height:0;position:absolute;',
          '.netflix-video .controls',
          'z-index:12;position:absolute;bottom:1px;width:100%;',
          '.netflix-video .playButton.v_icon',
          'margin-left:5px;',
          '.netflix-video .v_icon',
          'width:25px;height:25px;float:left;cursor:pointer;',
          '.netflix-video .timer',
          'float:left;font-family:Arial,sans-serif;font-weight:700;font-size:12px;letter-spacing:1px;text-shadow:0 1px 2px rgba(0,0,0,.5);line-height:26px;margin-left:9px;pointer-events:none;'
        );
      }

      function svgButton(id, hover) {
        var i = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        i.setAttribute('width', '25px');
        i.setAttribute('height', '25px');
        i.setAttribute('viewBox', '0 0 50 50');
        i.id = id || '';
        i.hover = hover;
        return i;
      }

      function createCloseButton() {
        var w = 20;
        var wrapper = document.createElement('div');
        var i = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        i.setAttribute('width', w + 'px');
        i.setAttribute('height', w + 'px');
        i.fill = new Utils.SvgIcon(
          'closeButtonFill',
          'M0,' + w / 2 + 'a' + w / 2 + ',' + w / 2 + ' 0 1,0 ' + w + ',0a' + w / 2 + ',' + w / 2 + ' 0 1,0 -' + w + ',0',
          this.config.closeColors[0]
        );
        var a = Math.round(w * 0.7);
        var b = w - a;
        i.cross = new Utils.SvgIcon(
          'line1',
          'M' + b + ' ' + b + ' L' + a + ' ' + a + ' M' + a + ' ' + b + ' L' + b + ' ' + a + ''
        );
        i.cross.setAttribute('stroke', this.config.closeColors[1]);
        i.cross.setAttribute('stroke-width', w < 15 ? 1 : 2);
        i.appendChild(i.fill);
        i.appendChild(i.cross);

        wrapper.appendChild(i);
        return wrapper;
      }

      function buildControls() {
        this.controls = document.createElement('div');
        TweenMax.set(this.controls, { y: this.config.contolsOffsetY });

        this.bar = document.createElement('div');
        this.bar.classList.add('bar');
        this.bar.innerHTML = '<div class="track"></div>';
        this.barFill = document.createElement('div');
        this.barFill.classList.add('fill');
        this.barFill.style.backgroundColor = this.config.colors[0];
        this.barIndicator = document.createElement('div');
        this.barIndicator.classList.add('indicator');
        this.barIndicator.style.backgroundColor = this.config.colors[0];
        this.bar.appendChild(this.barFill);
        this.bar.appendChild(this.barIndicator);
        Utils.hide(this.barIndicator);
        Utils.hide(this.bar);

        Utils.createStyle.call(
          this.component,
          COMPONENT_NAME,
          '.bar',
          'height:15px; position: absolute; top: -10px; left: 10px; cursor:pointer;',
          '.bar .track',
          'width:100%;height:1px; background-color: ' + this.config.colors[1] + ';position: absolute; top: 10px; left: 0;',
          '.bar .fill',
          'height:1px; position: absolute; top: 10px; left: 0;',
          '.bar .indicator',
          'width:10px;height:10px; border-radius:5px; position: absolute; top: 5px; left: 0px;background-color:' +
            this.config.colors[1] +
            ';pointer-events: none;'
        );

        if (this.config.controlsAutoHide) {
          this.controls.addEventListener(
            'mouseover',
            function() {
              TweenMax.to(this.controls, 0.3, { alpha: 1, ease: Cubic.easeOut });
            }.bind(this)
          );

          this.controls.addEventListener(
            'mouseout',
            function() {
              if (this.playing) {
                TweenMax.to(this.controls, 1, { alpha: 0, ease: Cubic.easeOut });
              }
            }.bind(this)
          );

          this.clickArea.addEventListener(
            'mouseover',
            function() {
              TweenMax.to(this.controls, 0.3, { alpha: 1, ease: Cubic.easeOut });
            }.bind(this)
          );

          this.clickArea.addEventListener(
            'mouseout',
            function() {
              if (this.playing) {
                TweenMax.to(this.controls, 1, { alpha: 0, ease: Cubic.easeOut });
              }
            }.bind(this)
          );
        }

        this.bar.addEventListener(
          'click',
          function(e) {
            var p = e.offsetX / this.bar.getBoundingClientRect().width;
            this.seek(this.video.getDuration() * p);
          }.bind(this)
        );

        this.bar.addEventListener(
          'mouseover',
          function() {
            Utils.show(this.barIndicator);
            this.barFill.seeking = true;
            this.barFill.current = this.barFill.style.width;
          }.bind(this)
        );

        this.bar.addEventListener(
          'mouseout',
          function() {
            this.barFill.seeking = false;
            Utils.hide(this.barIndicator);
            this.barFill.style.width = this.barFill.current;
          }.bind(this)
        );

        this.bar.addEventListener(
          'mousemove',
          function(e) {
            if (e.offsetX < this.bar.getBoundingClientRect().width - 6 && e.offsetX > 6)
              TweenMax.set(this.barIndicator, { x: e.offsetX - 6 });
            var p = e.offsetX / this.bar.getBoundingClientRect().width * 100;
            TweenMax.set(this.barFill, { width: p + '%' });
          }.bind(this)
        );

        this.playButton = new svgButton(null, 'M16,15 L16,35 24,30 24,19 M24,19 L24,30 35,25 35,25');
        this.playButton.icon = new Utils.SvgIcon(
          'svgIcon',
          'M16,15 L16,36 23,36 23,15 M28,15 L28,36 35,36 35,15',
          this.config.colors[0]
        );
        this.playButton.appendChild(this.playButton.icon);

        this.playButton.tween = {
          play: function() {
            this.icon.setAttributeNS(null, 'd', this.hover);
          }.bind(this.playButton),
          reverse: function() {
            this.icon.setAttributeNS(null, 'd', this.icon.getAttribute('data-original'));
          }.bind(this.playButton)
        };

        this.muteButton = new svgButton(null, 'M35,20 L46,31 M35,31 L46,20');
        this.muteButton.fill = new Utils.SvgIcon(
          '',
          'M13,20 L13,31 21,31 29,37 31,37 31,14 29,14 21,20 13,20 M35,20 L45,30',
          this.config.colors[0]
        );
        this.muteButton.appendChild(this.muteButton.fill);
        this.muteButton.icon = new Utils.SvgIcon('svgIcon', 'M35,20 A5,5 0 0,1 35,31', this.config.colors[0]);
        this.muteButton.icon.setAttribute('stroke', this.config.colors[0]);
        this.muteButton.icon.setAttribute('stroke-width', '3');
        this.muteButton.icon.setAttribute('fill-opacity', '0');
        this.muteButton.appendChild(this.muteButton.icon);

        this.muteButton.tween = {
          play: function() {
            this.icon.setAttributeNS(null, 'd', this.hover);
          }.bind(this.muteButton),
          reverse: function() {
            this.icon.setAttributeNS(null, 'd', this.icon.getAttribute('data-original'));
          }.bind(this.muteButton)
        };

        this.timerView = document.createElement('div');
        this.playButton.classList.add('playButton');
        this.playButton.classList.add('v_icon');
        this.muteButton.classList.add('muteButton');
        this.muteButton.classList.add('v_icon');
        this.timerView.className = 'timer';
        this.timerView.style.color = this.config.colors[0];

        this.controls.classList.add('controls');

        this.controls.appendChild(this.playButton);
        this.controls.appendChild(this.muteButton);
        this.controls.appendChild(this.timerView);
        this.controls.appendChild(this.bar);
        this.wrapper.appendChild(this.controls);

        if (Utils.isiOS) Utils.hide(this.muteButton);

        this.playButton.addEventListener('click', togglePlay.bind(this));
        this.playButton.addEventListener(
          'mouseover',
          function() {
            TweenMax.to(this.playButton.icon, 0.2, { fill: this.config.colors[1], ease: Quad.easeOut });
          }.bind(this)
        );
        this.playButton.addEventListener(
          'mouseout',
          function() {
            TweenMax.to(this.playButton.icon, 0.2, { fill: this.config.colors[0], ease: Quad.easeOut });
          }.bind(this)
        );

        this.muteButton.addEventListener('click', toggleMute.bind(this));
        this.muteButton.addEventListener(
          'mouseover',
          function() {
            TweenMax.to(this.muteButton.icon, 0.2, {
              fill: this.config.colors[1],
              stroke: this.config.colors[1],
              ease: Quad.easeOut
            });
            TweenMax.to(this.muteButton.fill, 0.2, { fill: this.config.colors[1], ease: Quad.easeOut });
          }.bind(this)
        );
        this.muteButton.addEventListener(
          'mouseout',
          function() {
            TweenMax.to(this.muteButton.icon, 0.2, { stroke: this.config.colors[0], ease: Quad.easeOut });
            TweenMax.to(this.muteButton.fill, 0.2, { fill: this.config.colors[0], ease: Quad.easeOut });
          }.bind(this)
        );

        if (this.config.customControlsMobile) {
          TweenMax.set([this.playButton, this.muteButton], { scale: 1.5 });
        }

        this.playButton.classList.remove('pause');
        this.playButton.tween.play();
      }

      function togglePlay() {
        if (this._video.paused) {
          this.resume();
        } else {
          this.pause();
          Utils.tracker('VIDEO_PAUSE', this.currentVideo.source, { time: this.video.getCurrentTime() });
        }
      }

      function toggleMute() {
        if (this.video.isMuted()) {
          this.unmute();
        } else {
          this.mute();
        }
      }

      function startTimer() {
        clearInterval(this.timer);
        this.playing = true;
        this.component.playing = true;
        this.timer = setInterval(
          function setInterval() {
            timeStep.call(this);
          }.bind(this),
          10
        );
        timeStep.call(this);
      }

      function timeStep() {
        if (this.video.getDuration()) {
          setTimeDisplay.call(this);
          var p = this.video.getCurrentTime() / this.video.getDuration();
          if (!this.barFill.seeking) this.barFill.style.width = p * 100 + '%';
        }

        this.component.dispatch('video-time', {
          currentTime: this.video.getCurrentTime(),
          duration: this.video.getDuration() || 0,
          target: this.component
        });

        switch (Math.round(p * 100)) {
          case 25:
            if (!this.currentVideo.firstQuart) {
              Utils.tracker('VIDEO_FIRST_QUART', this.currentVideo.source, { time: this.video.getCurrentTime() });
              this.currentVideo.firstQuart = true;
            }
            break;

          case 50:
            if (!this.currentVideo.secondQuart) {
              Utils.tracker('VIDEO_SECOND_QUART', this.currentVideo.source, { time: this.video.getCurrentTime() });
              this.currentVideo.secondQuart = true;
            }
            break;

          case 75:
            if (!this.currentVideo.thirdQuart) {
              Utils.tracker('VIDEO_THIRD_QUART', this.currentVideo.source, { time: this.video.getCurrentTime() });
              this.currentVideo.thirdQuart = true;
            }
            break;
        }
      }

      function setTimeDisplay(current) {
        this.timerView.innerHTML = this.timerView.innerHTML =
          Utils.timeFormat(current || Math.round(this.video.getCurrentTime())) +
          ' / ' +
          Utils.timeFormat(Math.round(this.video.getDuration()));
      }

      function setEvents() {
        this.clickArea.addEventListener('click', onVideoClick.bind(this));

        this.closeButton.addEventListener('click', this.close.bind(this));

        this.closeButton.addEventListener(
          'mouseover',
          function() {
            TweenMax.to(this.closeButtonSvg.fill, 0.3, { fill: this.config.closeColors[1], ease: Quad.easeOut });
            this.closeButtonSvg.cross.setAttribute('stroke', this.config.closeColors[0]);
          }.bind(this)
        );
        this.closeButton.addEventListener(
          'mouseout',
          function() {
            TweenMax.to(this.closeButtonSvg.fill, 0.3, { fill: this.config.closeColors[0], ease: Quad.easeOut });
            this.closeButtonSvg.cross.setAttribute('stroke', this.config.closeColors[1]);
          }.bind(this)
        );
      }

      function onVideoClick() {
        this.component.dispatch('video-click');
      }

      function onStateChanged(e) {
        switch (e.data != undefined ? e.data : e.type) {
          case 'ended':
            this.active = false;
            onVideoEnded.call(this);
            break;
          case 'loadeddata':
            if (!this.active || this.initPlay) {
              this.initPlay = false;
              onVideoPlay.call(this);
            }
            this.active = true;
            break;
          case 'pause':
            this.component.dispatch('video-pause');
            onVideoPause.call(this);
            break;
          case 'play':
            if (this.ended) onVideoPlay.call(this);
            this.ended = false;
            Utils.tracker('VIDEO_PLAY', this.currentVideo.source, { time: this.video.getCurrentTime() });
            this.component.dispatch('video-play');
            break;
        }
      }

      function onVideoEnded() {
        if (this.currentVideo.hideOnComplete) {
          this.hide();
        }

        this.stopTimer();

        this.initPlay = true;
        this.ended = true;
        this.playing = false;
        this.playButton.classList.remove('pause');
        this.playButton.tween.play();
        this.barFill.style.width = '100%';
        this.barFill.current = this.barFill.style.width;

        Utils.tracker('VIDEO_COMPLETE', this.currentVideo.source, { time: this.video.getCurrentTime() });
        this.component.dispatch('video-complete');
        this.currentVideo.completed++;
      }

      function onVideoPlay() {
        startTimer.call(this);
        Utils.show(this.container);
        this.playButton.classList.add('pause');
        this.playButton.tween.reverse();
        if (this.config.controlsAutoHide && this.config.controlsAutoHide[this.id]) {
          TweenMax.to(this.controls, 2, { alpha: 0, delay: 2, ease: Cubic.easeOut });
        }
        this.currentVideo.duration = this.video.duration;
        if (this.autoplay == true) {
          this.autoplay = false;
        }

        this.currentVideo.plays++;
      }

      function onVideoPause() {
        this.playButton.classList.remove('pause');
        this.playButton.tween.play();
      }
    }

    NetflixVideo.prototype.resize = function(size) {
      size = size || {};
      var i = this.config.size[this.id] ? this.id : 0;
      this.previousSize = { width: this.width, height: this.height };
      this.width = size.width || this.config.size[i].width;
      this.height = size.height || this.config.size[i].height;

      this.container.setAttribute('width', this.width);
      this.container.setAttribute('height', this.height);

      TweenMax.set(this.bar, { width: this.width - 20 });
      TweenMax.set([this.container, this._video, this.wrapper, this.component], { width: this.width, height: this.height });
    };

    NetflixVideo.prototype.setSource = function(id) {
      this.videoLoaded = this.currentVideo === this.sources[id];
      this.currentVideo = this.sources[id];
      this.currentVideo.firstQuart = false;
      this.currentVideo.secondQuart = false;
      this.currentVideo.thirdQuart = false;

      this.video.id = 'video_' + id;
      this.active = false;

      this.resize(this.config.size[id]);

      if (this.config.showBar[id] !== undefined) {
        if (this.config.showBar[id]) Utils.show(this.bar);
        else Utils.hide(this.bar);
      } else {
        if (this.config.showBar[0]) Utils.show(this.bar);
        else Utils.hide(this.bar);
      }

      if (!this.currentVideo.customControls) this.disableCustomControls();
      if (this.currentVideo.controls) this.enableControls();
      if (!this.currentVideo.controls) this.disableControls();
      if (this.currentVideo.customControls) this.enableCustomControls();

      this.playHistory = this.playHistory || [];
      this.playHistory.push(this.currentVideo);

      Utils.suppressLog = true;

      if (this.currentVideo.muted) {
        this.mute();
      } else {
        this.unmute();
      }

      this.timerView.innerHTML = '';
      this.video.cueVideoById(this.currentVideo.source);
    };

    NetflixVideo.prototype.play = function(id) {
      this.initPlay = true;

      if (id === -1) {
        this.autoplay = true;
      }

      if (!this.sources.length) return;

      id = this.sources[id] ? id : this.currentVideo ? this.currentVideo._id : 0;

      if (this.config.fullscreen[typeof this.config.fullscreen[id] === 'undefined' ? 0 : id] && id !== -1) {
        this.enterFullscreen();
      }

      this.load(id);

      this.videoPlays = this.videoPlays || {};
      this.videoPlays[id] = this.videoPlays[id] ? this.videoPlays[id] + 1 : 1;

      this.resume();
    };

    NetflixVideo.prototype.pause = function(time) {
      this.initPlay = true;
      this.video.pauseVideo();

      if (time !== null && time !== undefined) {
        this.seek(time);
      }

      this.playing = false;
      this.component.playing = false;
    };

    NetflixVideo.prototype.stop = function() {
      this.initPlay = true;
      if (this._video.ended) return;
      this.pause(0, false);
      this.active = false;

      Utils.tracker('VIDEO_STOP', this.currentVideo.source, { time: this.video.getCurrentTime() });
      Utils.suppressLog = true;

      this.stopTimer();
    };

    NetflixVideo.prototype.resume = function() {
      this.playing = true;
      this.component.playing = true;
      this.video.playVideo();
      this.playButton.classList.add('pause');
      this.playButton.tween.reverse();
    };

    NetflixVideo.prototype.seek = function(time) {
      this.video.seekTo(time || 0);
      this.barFill.current = this.barFill.style.width;
    };

    NetflixVideo.prototype.unmute = function() {
      this.video.unMute();
      this.currentVideo.muted = false;
      Utils.show(this.muteButton);
      this.muteButton.classList.add('unmute');
      this.muteButton.tween.reverse();
      Utils.tracker('VIDEO_UNMUTE', this.currentVideo.source, { time: this.video.getCurrentTime() });
    };

    NetflixVideo.prototype.mute = function() {
      this.video.mute();
      this.currentVideo.muted = true;
      this.muteButton.classList.remove('unmute');
      this.muteButton.tween.play();
      Utils.tracker('VIDEO_MUTE', this.currentVideo.source, { time: this.video.getCurrentTime() });
    };

    NetflixVideo.prototype.load = function(id) {
      if (!this.sources.length) return;

      this.show();

      this.setSource(id);

      if (this._video) this._video.load();
    };

    NetflixVideo.prototype.hide = function() {
      this.pause(null, false);
      Utils.hide(this.component);
      Utils.hide(this.container);
      Utils.hide(this.wrapper);
      this.stopTimer();
      this.active = false;
    };

    NetflixVideo.prototype.show = function() {
      Utils.show(this.component);
      Utils.show(this.wrapper);
      Utils.show(this.container);
    };

    NetflixVideo.prototype.close = function(e) {
      this.hide();
      if (this.currentVideo && this.currentVideo.source && e) {
        Utils.tracker('VIDEO_STOP', this.currentVideo.source, { time: this.video.getCurrentTime() });
      }
      this.component.dispatch('video-close');
    };

    NetflixVideo.prototype.enableCustomControls = function() {
      Utils.show(this.controls);
      Utils.show(this.clickArea);
      this._video.removeAttribute('controls');
    };

    NetflixVideo.prototype.disableCustomControls = function() {
      Utils.hide(this.controls);
      Utils.hide(this.clickArea);
      this._video.setAttribute('controls', 'controls');
    };

    NetflixVideo.prototype.enableControls = function() {
      Utils.hide(this.clickArea);
      this._video.setAttribute('controls', 'controls');
    };

    NetflixVideo.prototype.disableControls = function() {
      Utils.show(this.clickArea);
      this._video.removeAttribute('controls');
    };

    return NetflixVideo;
  })();

  // Component Definition
  (function() {
    var component = Object.create(HTMLElement.prototype, {
      createdCallback: {
        value: function() {
          this._attached = false;
          this._hasInited = false;
        },
        enumerable: true
      },
      detachedCallback: {
        value: function() {
          this._attached = false;
        }
      },
      attachedCallback: {
        value: function() {
          this._attached = true;

          if (this._hasInited) {
            return;
          }

          this._hasInited = true;

          var videoComponent = this;

          this.toggle = true;
          this.width = parseInt(this.getAttribute('width') || this.offsetWidth);
          this.height = parseInt(this.getAttribute('height') || this.offsetHeight);

          var elements = document.querySelectorAll('netflix-video');

          for (var i = 0; i < elements.length; i++) {
            elements[i].setAttribute('video_id', i + 1);
            elements[i].style.position = 'absolute';
          }

          var config = (this.config = {});
          config.size = [
            {
              width: this.width,
              height: this.height
            }
          ];

          config.sources = [this.getAttribute('source')];
          config.closeButtonSize = 20;
          config.colors = [this.getAttribute('color-1'), this.getAttribute('color-2')];
          config.showBar = [true];
          config.controlsAutoHide = [this.hasAttribute('controlsAutoHide')];
          config.closeColors = [
            this.getAttribute('close-color-1') || this.getAttribute('color-1'),
            this.getAttribute('close-color-2') || this.getAttribute('color-2')
          ];
          config.hideOnComplete = [this.hasAttribute('hideOnComplete')];
          config.customControls = [this.hasAttribute('controls')];
          config.controls = [false];
          config.fullscreen = [this.hasAttribute('fullscreen')];
          config.muted = [this.hasAttribute('muted')];
          config.autoplay = this.hasAttribute('autoplay');
          config.contolsOffsetY = this.getAttribute('controls-offset-y') || 0;

          if (config.autoplay) {
            config.muted[0] = true;
          }

          if (Utils.isMobile) {
            config.controls = [true];
            config.customControls = [false];
          }

          if (!this.getAttribute('data-dynamic-key')) {
            window.addEventListener(
              'adinitialized',
              function() {
                this.video = new NetflixVideo(this, config);
              }.bind(this),
              false
            );
          } else {
            var MonetComponent = document.querySelector('monet-integrator');
            if (MonetComponent) {
              MonetComponent.register(this);
              MonetComponent.getMonetData().then(
                function(data) {
                  var d = videoComponent.getAttribute('data-dynamic-key');

                  try {
                    if (setVideoToggle(data)) {
                      config.sources = getVideoNode(data, d);
                      this.video = new NetflixVideo(this, config);
                      this.dispatchEvent(new CustomEvent('ready'));
                    }
                  } catch (e) {
                    console.error('Monet dynamic ID:', d, 'not found in JSON. Trying backup');

                    MonetComponent.getBackupMonetData().then(
                      function(backupData) {
                        if (setVideoToggle(backupData)) {
                          config.sources = getVideoNode(backupData, d);
                          this.video = new NetflixVideo(this, config);
                          this.dispatchEvent(new CustomEvent('ready'));
                        }
                      }.bind(this),
                      function(error) {
                        console.error('Failed to load backup Monet data', error);
                      }
                    );
                  }
                }.bind(this),
                function(error) {
                  console.error('Failed to load Monet data', error);
                }
              );
            } else {
              this.video = new NetflixVideo(this, config);
              this.dispatchEvent(new CustomEvent('ready'));
            }
          }

          function setVideoToggle(data) {
            var d = videoComponent.getAttribute('data-dynamic-key');
            if (data.rootAssets['bool.Toggle_' + d]) {
              if (!data.rootAssets['bool.Toggle_' + d].value) {
                videoComponent.dispatchEvent(new CustomEvent('ready'));
                return (videoComponent.toggle = false);
              }
            }
            return true;
          }

          function getVideoNode(data, key) {
            var r = data.rootAssets;
            var types = ['video', 'url'];
            for (var i = 0; i < 2; i++) {
              var combo = types[i] + '.' + key;
              if (r[combo]) {
                return [r[combo].url];
              }
            }
            throw new Error('Monet dynamic ID: ' + key + ' not found in backup JSON');
          }
        },
        enumerable: true
      },

      play: {
        value: function() {
          if (!this.toggle) {
            this.dispatch('video-complete');
          }
          if (this.video) {
            this.video.play();
          }
        }
      },

      pause: {
        value: function() {
          if (this.video && this.toggle) {
            this.video.pause();
          }
        }
      },

      close: {
        value: function(e) {
          if (this.video && this.toggle) {
            this.video.close(e);
          }
        }
      },

      mute: {
        value: function() {
          if (this.video && this.toggle) {
            this.video.mute();
          }
        }
      },

      unmute: {
        value: function() {
          if (this.video && this.toggle) {
            this.video.unmute();
          }
        }
      },

      seek: {
        value: function(t) {
          if (this.video && this.toggle) {
            this.video.seek(t);
          }
        }
      },

      resize: {
        value: function(w, h) {
          if (this.video && this.toggle) {
            this.video.resize({ width: w, height: h });
          }
        }
      },

      dispatch: {
        value: function(e, d) {
          var customEvent = document.createEvent('CustomEvent');
          customEvent.initCustomEvent(e, !0, !0, d);
          this.dispatchEvent(customEvent);
        }
      },

      preview: {
        value: function() {
          this.setAttribute('width', 300);
          this.setAttribute('height', 300);
          this.setAttribute('color-1', '#E50914');
          this.setAttribute('color-2', '#F5F5F1');
          this.setAttribute('close-color-1', '#E50914');
          this.setAttribute('close-color-2', '#F5F5F1');
          this.setAttribute('data-dynamic-key', 'Trailer');
          this.setAttribute('controls', 'true');
          this.setAttribute('autoplay', 'true');
          this.setAttribute('source', '//ae.nflximg.net/monet/video/fpo/1x1.mp4');
        }
      }
    });

    document.registerElement(COMPONENT_NAME, { prototype: component });
  })();
})();
// GENERIC SOURCE TRACKER: wc-netflix-video
if (typeof module === 'undefined') {
  module = {};
}
// prettier-ignore
module.exports = {
  "id": "5aacacc2-df1a-4028-9335-6b767bf96670",
  "name": "wc-netflix-video",
  "description": "A simple video player component for ads",
  "type": "web_components",
  "context": "Default",
  "state": "published",
  "updated": 1544729972330,
  "full_name": "NetflixAdsEng/wc-netflix-video",
  "html_url": "https://github.com/NetflixAdsEng/wc-netflix-video",
  "username": "GitHub",
  "version": "4.1.0",
  "minimum": "3.0.0"
};

		</script>
	</head>

	<body>
		<script>
			var component = document.createElement('netflix-video')
			component.preview()
			document.body.appendChild(component)
		</script>
	</body>
</html>
