<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	

	

	<script type="text/javascript">
		
// v7.1.0 - https://github.com/taylorhakes/promise-polyfill/blob/master/dist/polyfill.min.js
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){"use strict";function e(){}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],f(e,this)}function t(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(f){return void r(t.promise,f)}o(t.promise,i)}else(1===e._state?o:r)(t.promise,e._value)})):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if(t instanceof n)return e._state=3,e._value=t,void i(e);if("function"==typeof o)return void f(function(e,n){return function(){e.apply(n,arguments)}}(o,t),e)}e._state=1,e._value=t,i(e)}catch(u){r(e,u)}}function r(e,n){e._state=2,e._value=n,i(e)}function i(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var o=0,r=e._deferreds.length;r>o;o++)t(e,e._deferreds[o]);e._deferreds=null}function f(e,n){var t=!1;try{e(function(e){t||(t=!0,o(n,e))},function(e){t||(t=!0,r(n,e))})}catch(i){if(t)return;t=!0,r(n,i)}}var u=setTimeout;n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(n,o){var r=new this.constructor(e);return t(this,new function(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}(n,o,r)),r},n.prototype["finally"]=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},n.all=function(e){return new n(function(n,t){function o(e,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(n){n(e)})},n.reject=function(e){return new n(function(n,t){t(e)})},n.race=function(e){return new n(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){u(e,0)},n._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var c=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==c)return c;throw Error("unable to locate global object")}();c.Promise||(c.Promise=n)});
// Custom event polyfill for IE
(function () {
	if (typeof window.CustomEvent === 'function') {
		return;
	}

	function CustomEvent (event, params) {
		params = params || { bubbles: false, cancelable: false, detail: void 0 };

		var evt = document.createEvent('CustomEvent');
		evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
		return evt;
	}

	CustomEvent.prototype = window.Event.prototype;
	window.CustomEvent = CustomEvent;
})();window.Utils = window.Utils || {}

Utils.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

Utils.isiOS    = /iPad|iPhone|iPod/.test(navigator.userAgent);
Utils.isiOS9up = Utils.isiOS && ((navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/)[1] > 9);
Utils.isiPad   = /iPad/.test(navigator.userAgent);
Utils.isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);(function() {
  function chooseExitURL(desktopExitURL, iosExitURL, androidExitURL) {
    var exitURL = null;

    if (Utils.isMobile) {
      exitURL = Utils.isiOS ? iosExitURL : androidExitURL;
    }

    return exitURL || desktopExitURL;
  }

  function doHTTPRequest(url) {
    return new Promise(function(resolve, reject) {
      var xhr = new XMLHttpRequest();
      xhr.addEventListener('load', function() {
        if (xhr.status >= 200 && xhr.status < 300) {
          log('info', 'url loaded', url, xhr.response);
          resolve(xhr.response);
          return;
        }

        var errorMessage = 'Failed to load ' + url + ' [' + xhr.status + ']' + xhr.responseText;
        log('error', errorMessage);
        reject(new Error(errorMessage));
      });

      xhr.addEventListener('error', function(errorEvent) {
        var message = 'Error in loading ' + url;
        log('error', message, errorEvent);
        reject(errorEvent.error || new Error(message));
      });

      xhr.open('GET', url);
      xhr.send();
    });
  }

  function listenForLoad(target) {
    return new Promise(function(resolve, reject) {
      var onLoad = null;
      var onError = null;

      var onDone = function() {
        target.removeEventListener('load', onLoad);
        target.removeEventListener('error', onError);
      };

      onLoad = function() {
        onDone();
        resolve(null);
      };
      onError = function(event) {
        onDone();
        reject(event.error);
      };

      target.addEventListener('load', onLoad);
      target.addEventListener('error', onError);
    });
  }

  function log(level) {
    if (!!window.Enabler && Enabler.isServingInLiveEnvironment() && level !== 'error') {
      return;
    }
    console[level].apply(console, Array.prototype.slice.call(arguments, 1));
  }

  function getGWDDynamicContent(dynamicFeedSheetName) {
    var dynamicContent = {};
    var windowDynamicContent = window.devDynamicContent || window.dynamicContent;

    if (!windowDynamicContent) {
      return dynamicContent;
    }

    dynamicContent[dynamicFeedSheetName] = windowDynamicContent[dynamicFeedSheetName];
    return dynamicContent;
  }

  var ElementCreationObserver = (function() {
    function elementMatchesSelector(element, selector) {
      if (element.nodeType !== Node.ELEMENT_NODE) {
        return false;
      }

      var matcher =
        element.matches ||
        element.matchesSelector ||
        element.mozMatchesSelector ||
        element.msMatchesSelector ||
        element.oMatchesSelector ||
        element.webkitMatchesSelector;
      if (!matcher) {
        return false;
      }
      return matcher.call(element, selector);
    }

    function ElementCreationObserver() {
      this.mutationObserver = null;
    }

    ElementCreationObserver.prototype.startObserving = function(selectorToObserve, callback) {
      if (!window.MutationObserver || window.MutationObserver._isPolyfilled) {
        var monetElementObserverFunctionName = 'monetElementObserver_' + '_' + Math.floor(Math.random() * 10000);

        window[monetElementObserverFunctionName] = function() {
          var matchingElements = Array.prototype.slice.call(document.querySelectorAll(selectorToObserve));
          if (matchingElements.length > 0) {
            callback(matchingElements);
          }
          window[monetElementObserverFunctionName] = null;
        };

        var scriptSource = 'window.' + monetElementObserverFunctionName + '();';
        var scriptBase64URI = 'data:text/javascript;base64,' + btoa(scriptSource);

        var triggerScript = document.createElement('script');
        triggerScript.setAttribute('type', 'text/javascript');
        triggerScript.setAttribute('src', scriptBase64URI);

        // IE10 behavior on when a dynamic script tag gets executed doesn't
        // seem to be obvious. Scheduling the script to execute at the end
        // of the current event loop seems to be the most reliable way
        // to get the script to execute before web components start to execute.
        setTimeout(function() {
          document.head.appendChild(triggerScript);
        }, 0);
      } else {
        var config = { attributes: false, childList: true, characterData: false, subtree: true };
        this.mutationObserver = new MutationObserver(function(mutations) {
          var matchedNodes = [];

          mutations.forEach(function(mutationRecord) {
            if (mutationRecord.type !== 'childList') {
              return;
            }

            var addedNodes = Array.prototype.slice.call(mutationRecord.addedNodes);
            addedNodes.forEach(function(addedNode) {
              if (addedNode.nodeType !== Node.ELEMENT_NODE) {
                return;
              }

              if (elementMatchesSelector(addedNode, selectorToObserve)) {
                matchedNodes.push(addedNode);
              }
              var subtreeMatches = addedNode.querySelectorAll(selectorToObserve);
              Array.prototype.push.apply(matchedNodes, subtreeMatches);
            });
          });

          if (matchedNodes.length > 0) {
            callback(matchedNodes);
          }
        });
        this.mutationObserver.observe(document, config);
      }
    };

    ElementCreationObserver.prototype.stopObserving = function() {
      if (!!this.mutationObserver) {
        this.mutationObserver.disconnect();
        this.mutationObserver = null;
      }
    };

    return ElementCreationObserver;
  })();

  var MonetLoader = (function() {
    var MONET_SDK_URL = 'https://ae.nflximg.net/monet/scripts/monet.min.js';
    var ENABLER_URL = 'https://s0.2mdn.net/ads/studio/Enabler.js';

    var monetInitialized = false;
    var scriptURLToLoadPromise = {};

    function loadScript(scriptURL) {
      var script = document.createElement('script');

      var loadPromise = listenForLoad(script);

      script.setAttribute('type', 'text/javascript');
      script.setAttribute('src', scriptURL);
      document.head.appendChild(script);

      return loadPromise;
    }

    function ensureExternalScriptExecuted(scriptURL) {
      var scriptPromise = scriptURLToLoadPromise[scriptURL];
      if (!scriptPromise) {
        scriptPromise = scriptURLToLoadPromise[scriptURL] = loadScript(scriptURL);
      }
      return scriptPromise;
    }

    function ensureMonetSDKInjected() {
      if (!!window.Monet) {
        return Promise.resolve();
      }
      return ensureExternalScriptExecuted(MONET_SDK_URL);
    }

    function ensureEnablerInjected() {
      if (!!window.Enabler) {
        return Promise.resolve();
      }
      return ensureExternalScriptExecuted(ENABLER_URL);
    }

    function ensureEnablerInitialized() {
      if (Enabler.isInitialized()) {
        return Promise.resolve();
      }

      return new Promise(function(resolve, reject) {
        Enabler.addEventListener(studio.events.StudioEvent.INIT, function() {
          resolve();
        });
      });
    }

    function initializeMonet() {
      // Enabler script is typically already injected, no need to parallelize Enabler and
      // monet loading
      return ensureEnablerInjected()
        .then(ensureMonetSDKInjected)
        .then(ensureEnablerInitialized)
        .then(function() {
          if (!monetInitialized) {
            monetInitialized = true;

            Monet.initialize(Enabler);
            // TODO (shashanks): Move this event logging to inside Monet.initialize
            // Monet.logEvent('MONET_INITIALIZED');
          }
          return Monet;
        });
    }

    function MonetLoader() {}

    MonetLoader.prototype.getInitialized = function() {
      return initializeMonet();
    };

    return MonetLoader;
  })();

  var MonetDataProvider = (function() {
    var STATIC_BACKUP_LOCATION = 'backup.json';
    var MONET_COMPONENT_TYPE_TO_VALUE_FIELD_NAME = {
      text: 'text',
      number: 'value',
      image: 'url',
      video: 'url',
      url: 'url',
      bool: 'value'
    };
    var MonetDataProviderDataType = {
      MONET: 'MONET',
      GWD: 'GWD'
    };

    function getMonetComponentValueFieldForComponentType(monetComponentType) {
      return MONET_COMPONENT_TYPE_TO_VALUE_FIELD_NAME[monetComponentType] || 'value';
    }

    function convertMonetAssetsToGWDAssets(monetAssets, dynamicFeedSheetName) {
      var gwdData = {};
      Object.keys(monetAssets.rootAssets).forEach(function(key) {
        var value = monetAssets.rootAssets[key];

        var monetComponentType = key.split('.')[0];
        var gwdKey = value.id;
        var gwdValue = value[getMonetComponentValueFieldForComponentType(monetComponentType) || 'value'];
        if (monetComponentType === 'url' || monetComponentType === 'image' || monetComponentType === 'video') {
          gwdValue = {
            Url: gwdValue
          };
        }

        gwdData[gwdKey] = gwdValue;
      });

      var gwdAssets = {};
      gwdAssets[dynamicFeedSheetName] = [gwdData];
      return gwdAssets;
    }

    function guessGWDDataValueMonetComponentType(value) {
      if (typeof value === 'boolean') {
        return 'bool';
      }
      if (typeof value === 'number') {
        return 'number';
      }
      if (typeof value === 'string') {
        if (/(^[^.]*$)|(\.(gif|jpg|jpeg|png)$)/i.test(value) || /^https:\/\/[^.]+.nflximg.net\/api\/v\d\/rendition/.test(value)) {
          return 'image';
        }
        if (/(^[^.]*$)|(\.(mpeg|webm|flv|mp4)$)/i.test(value)) {
          return 'video';
        }
        if (/^https?/.test(value)) {
          return 'url';
        }
        return 'text';
      }
      return null;
    }

    function convertGWDAssetsToMonetAssets(gwdAssets, dynamicFeedSheetName) {
      var dynamicContentValues = gwdAssets[dynamicFeedSheetName][0];
      var rootAssets = {};
      Object.keys(dynamicContentValues).forEach(function(key) {
        var value = dynamicContentValues[key];
        if (typeof value === 'object' && value.hasOwnProperty('Url')) {
          value = value.Url;
        }

        var monetComponentType = guessGWDDataValueMonetComponentType(value);
        if (monetComponentType === null) {
          log('warn', 'Failed to guess monet type for GWD value', value);
          return;
        }

        var monetKey = monetComponentType + '.' + key;
        var monetValue = {
          type: monetComponentType,
          id: key
        };
        var valueFieldKey = getMonetComponentValueFieldForComponentType(monetComponentType);
        monetValue[valueFieldKey] = value;

        rootAssets[monetKey] = monetValue;
      });

      return {
        rootAssets: rootAssets
      };
    }

    function validateGWDAssets(providedGWDData, defaultDynamicContent) {
      var validationPromises = Object.keys(defaultDynamicContent).map(function(key) {
        // Keys starting with _ are for book keeping within GWD (e.g _id)
        // and not used for binding.
        // Note (shashanks): Make sure that we never have used keys starting with an _
        if (key[0] === '_') {
          return Promise.resolve();
        }

        if (!providedGWDData.hasOwnProperty(key)) {
          var message = 'GWD assets invalid - missing key ' + key;
          return Promise.reject(new Error(message));
        }

        var defaultValue = defaultDynamicContent[key];
        var providedValue = providedGWDData[key];

        var defaultValueType = guessGWDDataValueMonetComponentType(defaultValue);
        var providedValueType = guessGWDDataValueMonetComponentType(providedValue);
        if (defaultValueType !== providedValueType) {
          var message = [
            'GWD assets invalid - data type mismatch, expected',
            '\n\t defaultValueType:',
            defaultValueType,
            '\n\t found',
            '\n\t providedValueType:',
            providedValueType,
            '\n\t defaultValue:',
            defaultValue,
            '\n\t providedValue:',
            providedValue
          ].join(' ');
          return Promise.reject(new Error(message));
        }

        if (typeof providedValue === 'object') {
          return validateGWDAssets(providedValue, defaultValue);
        }

        return Promise.resolve();
      });

      return Promise.all(validationPromises);
    }

    function processAssets(monetDataProvider, monetAssets, gwdAssets) {
      if (!gwdAssets && !!monetAssets && monetDataProvider.dynamicFeedSheetName) {
        gwdAssets = convertMonetAssetsToGWDAssets(monetAssets, monetDataProvider.dynamicFeedSheetName);
      }
      if (!monetAssets && !!gwdAssets && monetDataProvider.dynamicFeedSheetName) {
        monetAssets = convertGWDAssetsToMonetAssets(gwdAssets, monetDataProvider.dynamicFeedSheetName);
      }

      // Set the Exit_URL based on the platform
      if (!!gwdAssets && monetDataProvider.dynamicFeedSheetName) {
        var dynSheet = gwdAssets[monetDataProvider.dynamicFeedSheetName][0];
        dynSheet.Exit_URL = {
          Url: chooseExitURL(dynSheet.Exit_URL_Desktop.Url, dynSheet.Exit_URL_iOS.Url, dynSheet.Exit_URL_Android.Url)
        };
      }
      if (!!monetAssets) {
        var getExitURLForKey = function(key) {
          return monetAssets.rootAssets[key] && monetAssets.rootAssets[key].url;
        };

        monetAssets.rootAssets['url.Exit_URL'] = {
          type: 'url',
          id: 'Exit_URL',
          url: chooseExitURL(
            getExitURLForKey('url.Exit_URL_Desktop'),
            getExitURLForKey('url.Exit_URL_iOS'),
            getExitURLForKey('url.Exit_URL_Android')
          )
        };
      }

      monetDataProvider.dataTransformers.forEach(function(transformer) {
        transformer.call(monetDataProvider, gwdAssets, monetDataProvider);
      });

      var assets = {};
      assets[MonetDataProviderDataType.MONET] = monetAssets;
      assets[MonetDataProviderDataType.GWD] = gwdAssets;

      return assets;
    }

    function validateProcessedAssets(processedAssets, monet, dynamicFeedSheetName) {
      var defaultDynamicContent = getGWDDynamicContent(dynamicFeedSheetName);
      if (!defaultDynamicContent) {
        // If not in a GWD container, there is no validation to be done
        return Promise.resolve(processedAssets);
      }

      // Validate GWD assets
      var primaryGWDAssets = processedAssets[MonetDataProvider.MonetDataProviderDataType.GWD];
      return validateGWDAssets(primaryGWDAssets, defaultDynamicContent).then(
        function() {
          return processedAssets;
        },
        function(error) {
          monet.logEvent('MONET_DATA_ERROR', {
            stack: error.stack,
            details: error.message
          });
          return Promise.reject(error);
        }
      );
    }

    function loadPrimaryAssets(monetDataProvider, monet) {
      if (!monetDataProvider.primaryAssetsPromise) {
        var monetRequestParams = monet.buildMonetRequest();
        monetDataProvider.primaryAssetsPromise = new Promise(function(resolve, reject) {
          monet.load(
            monetRequestParams,
            function(monetAssets) {
              // TODO (shashanks): Move this event logging to inside Monet
              monet.logEvent('MONET_ASSETS_LOADED');
              var processedAssets = processAssets(monetDataProvider, monetAssets, null);
              validateProcessedAssets(processedAssets, monet, monetDataProvider.dynamicFeedSheetName).then(function() {
                resolve(processedAssets);
              }, reject);
            },
            function(error) {
              log('warn', 'Error in loading creative assets from monet', error);
              reject(error);
            }
          );
        });
      }

      return monetDataProvider.primaryAssetsPromise;
    }

    function loadBackupAssets(monetDataProvider, monet) {
      if (!monetDataProvider.backupAssetsPromise) {
        monetDataProvider.backupAssetsPromise = doHTTPRequest(monetDataProvider.backupLocation || STATIC_BACKUP_LOCATION)
          .then(function(backupMonetAssets) {
            backupMonetAssets = JSON.parse(backupMonetAssets);
            backupMonetAssets.isBackupData = true;
            monet.logEvent('BACKUP_ASSETS_LOADED');
            var processedAssets = processAssets(monetDataProvider, backupMonetAssets, null);
            return validateProcessedAssets(processedAssets, monet, monetDataProvider.dynamicFeedSheetName);
          })
          .then(null, function(error) {
            log('warn', 'Backup load failed, trying dynamicContent', error);

            var dynContent = getGWDDynamicContent(monetDataProvider.dynamicFeedSheetName);
            if (!!dynContent) {
              monet.logEvent('DYNAMIC_CONTENT_LOADED');
              return processAssets(monetDataProvider, null, dynContent);
            }

            return Promise.reject(error);
          });
      }
      return monetDataProvider.backupAssetsPromise;
    }

    function MonetDataProvider(monetLoader, dynamicFeedSheetName, backupLocation) {
      this.backupLocation = backupLocation;
      this.monetLoader = monetLoader;
      this.dynamicFeedSheetName = dynamicFeedSheetName;

      this.dataLoadPromise = null;
      this.dataLoadFinished = false;
      this.loadedData = null;

      this.primaryAssetsPromise = null;
      this.backupAssetsPromise = null;

      this.dataTransformers = [];
    }

    MonetDataProvider.prototype.loadData = function() {
      var monetLoader = this.monetLoader;
      var monetDataProvider = this;

      if (!this.dataLoadPromise) {
        this.dataLoadPromise = monetLoader
          .getInitialized()
          .then(function(monet) {
            return loadPrimaryAssets(monetDataProvider, monet);
          })
          .then(null, function(error) {
            log('warn', 'primary assets load failed, trying backup', error);
            return monetLoader.getInitialized().then(function(monet) {
              return loadBackupAssets(monetDataProvider, monet);
            });
          })
          .then(
            function(data) {
              monetDataProvider.dataLoadFinished = true;
              return (monetDataProvider.loadedData = data);
            },
            function(error) {
              monetDataProvider.dataLoadFinished = true;
              return Promise.reject(error);
            }
          );
      }

      return this.dataLoadPromise;
    };

    MonetDataProvider.prototype.isDataLoaded = function() {
      return this.dataLoadFinished;
    };

    MonetDataProvider.prototype.getData = function(dataType) {
      if (!this.dataLoadFinished) {
        return null;
      }
      return this.loadedData[dataType];
    };

    MonetDataProvider.prototype.getDataWhenLoaded = function(dataType) {
      return this.dataLoadPromise.then(function(data) {
        return data[dataType];
      });
    };

    MonetDataProvider.prototype.getBackupData = function(dataType) {
      var monetDataProvider = this;

      return this.monetLoader.getInitialized().then(function(monet) {
        return loadBackupAssets(monetDataProvider, monet).then(function(backupAssets) {
          return backupAssets[dataType];
        });
      });
    };

    MonetDataProvider.prototype.addDataTransformer = function(dataTransformer) {
      this.dataTransformers.push(dataTransformer);
    };

    MonetDataProvider.MonetDataProviderDataType = MonetDataProviderDataType;

    return MonetDataProvider;
  })();

  (function() {
    var MONET_GWD_COMPONENT_NAME = 'monet-integrator';
    var DOUBLECLICK_COMPONENT_NAME = 'gwd-doubleclick';
    var DOUBLECLICK_COMPONENT_DATA_PROVIDER_ATTRIBUTE_NAME = 'data-provider';
    var DEFAULT_GWD_DATA_PROVIDER_TAG_NAME = 'gwd-gpa-data-provider';

    var elementCreationObserver = new ElementCreationObserver();

    var _collection = [];
    var _isEmpty = true;

    function fireEvent(monetComponent, eventName) {
      var event = new CustomEvent(eventName, {
        bubbles: true,
        cancelable: true
      });
      monetComponent.dispatchEvent(event);
    }

    function replaceDoubleClickDataProvider(monetGWDComponent) {
      var monetGWDComponentId = monetGWDComponent.getAttribute('id');

      var doubleClickComponents = document.querySelectorAll(DOUBLECLICK_COMPONENT_NAME);
      for (var i = 0; i < doubleClickComponents.length; ++i) {
        var doubleClickComponent = doubleClickComponents[i];
        doubleClickComponent.setAttribute(DOUBLECLICK_COMPONENT_DATA_PROVIDER_ATTRIBUTE_NAME, monetGWDComponentId);
      }

      // Remove the default data provider so that it doesn't try to load its own
      // data. The default component can try to load its own data and pollute
      // devDynamicContent.
      var defaultGWDDataProvider = document.querySelector(DEFAULT_GWD_DATA_PROVIDER_TAG_NAME);
      if (!!defaultGWDDataProvider && !!defaultGWDDataProvider.parentNode) {
        defaultGWDDataProvider.parentNode.removeChild(defaultGWDDataProvider);
      }
    }

    function setUpMonetComponentRePrioritization() {
      elementCreationObserver.startObserving('monet-integrator', function(createdNodes) {
        elementCreationObserver.stopObserving();
        var monetGWDNode = createdNodes[0];
        document.body.insertBefore(monetGWDNode, document.body.firstChild);
        replaceDoubleClickDataProvider(monetGWDNode);
      });
    }

    var proto = Object.create(HTMLElement.prototype, {
      pendingLogs: {
        value: [],
        enumerable: false
      },

      createdCallback: {
        value: function() {
          this.monetLoader = null;
          this.monetDataProvider = null;
          replaceDoubleClickDataProvider(this);
        },
        enumerable: true
      },

      attachedCallback: {
        value: function() {
          if (this._attached) return;
          this._attached = true;
          var component = this;

          this.monetLoader = new MonetLoader();
          this.monetLoader.getInitialized().then(function(monet) {
            if (component.pendingLogs.length === 0) {
              return;
            }

            var pendingLogs = component.pendingLogs.slice();
            component.pendingLogs.length = 0;
            monet.logEvents(pendingLogs);
          });

          var dynamicFeedSheetName = this.getAttribute('dynamic-feed-sheet-name');
          if (!dynamicFeedSheetName || (dynamicFeedSheetName && dynamicFeedSheetName.length < 1)) {
            log('warn', 'Missing `dynamic-feed-sheet-name="your sheet name"`');
          }

          this.monetDataProvider = new MonetDataProvider(this.monetLoader, dynamicFeedSheetName, this.getAttribute('backup'));
          this.monetDataProvider.loadData().then(
            function() {
              // fireEvent(component, 'ready');
            },
            function(error) {
              fireEvent(component, 'error');
            }
          );
        },
        enumerable: true
      },

      attributeChangedCallback: {
        value: function(attributeName) {},
        enumerable: true
      },

      isDataLoaded: {
        value: function() {
          return !!this.monetDataProvider && this.monetDataProvider.isDataLoaded();
        }
      },

      getData: {
        value: function() {
          return this.monetDataProvider.getData(MonetDataProvider.MonetDataProviderDataType.GWD);
        }
      },

      getMonetData: {
        value: function() {
          return this.monetDataProvider.getDataWhenLoaded(MonetDataProvider.MonetDataProviderDataType.MONET);
        }
      },

      getBackupMonetData: {
        value: function() {
          return this.monetDataProvider.getBackupData(MonetDataProvider.MonetDataProviderDataType.MONET);
        }
      },

      addDataTransformer: {
        value: function(transformer) {
          return this.monetDataProvider.addDataTransformer(transformer);
        }
      },

      logEvent: {
        value: function(eventType, eventData) {
          if (!this.monetLoader) {
            // TODO (shashank): Capture timing parameters here
            this.pendingLogs.push({
              eventType: eventType,
              eventData: eventData
            });
            return;
          }

          this.monetLoader.getInitialized().then(
            function(monet) {
              monet.logEvent(eventType, eventData);
            },
            function(error) {
              log('error', 'Failed to log Monet event', error, eventType, eventData);
            }
          );
        }
      },

      register: {
        value: function(component) {
          _isEmpty = false;
          if (_collection.indexOf(component) > -1) {
            return;
          }

          _collection.push(component);

          component.addEventListener(
            'ready',
            function(event) {
              var index = _collection.indexOf(event.target);
              if (index > -1) {
                _collection.splice(index, 1);

                if (_collection.length == 0) {
                  this.setAttribute('ready', '');
                  fireEvent(this, 'ready');
                }
              }
            }.bind(this)
          );
        }
      },

      preview: {
        value: function() {
          return false;
        }
      }
    });

    setUpMonetComponentRePrioritization();
    document.registerElement(MONET_GWD_COMPONENT_NAME, { prototype: proto });
  })();
})();
// Test implementation - wc-monet-integrator
if (typeof module === "undefined") {
    module = {};
}
module.exports = {
  "id": "67e5c648-28f4-41c4-b2e4-c12fbbc10825",
  "name": "wc-monet-integrator",
  "description": "Component to tie ad units to monet data integration",
  "type": "web_components",
  "context": "Default",
  "state": "published",
  "updated": 1525478139446,
  "full_name": "NetflixAdsEng/wc-monet-integrator",
  "html_url": "https://github.com/NetflixAdsEng/wc-monet-integrator",
  "username": "GitHub",
  "version": "2.0.4"
};
	</script>
</head>

<body>
	<script>
		var component = document.createElement('monet-integrator');
		component.preview();
		document.body.appendChild(component);
	</script>
</body>

</html>